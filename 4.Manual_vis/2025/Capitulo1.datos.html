<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="Es-es" xml:lang="Es-es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Javier Rodríguez-Barrios, Kenedith Méndez, Javier de la Hoz">
<meta name="dcterms.date" content="2025-07-24">
<meta name="description" content="….">

<title>Manual de Análisis Visuazalización de datos ecológicos y ambientales - Anvidea</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Capitulo1.datos_files/libs/clipboard/clipboard.min.js"></script>
<script src="Capitulo1.datos_files/libs/quarto-html/quarto.js"></script>
<script src="Capitulo1.datos_files/libs/quarto-html/popper.min.js"></script>
<script src="Capitulo1.datos_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Capitulo1.datos_files/libs/quarto-html/anchor.min.js"></script>
<link href="Capitulo1.datos_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Capitulo1.datos_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Capitulo1.datos_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Capitulo1.datos_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Capitulo1.datos_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>
    .quarto-title-block .quarto-title-banner {
      background: #2b8cbe;
    }
    </style>

<script src="Capitulo1.datos_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="Capitulo1.datos_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="styles2.css">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Manual de Análisis Visuazalización de datos ecológicos y ambientales - Anvidea</h1>
            <p class="subtitle lead">Capítulo 1. Fundamentos de manipulación de datos</p>
                  <div>
        <div class="description">
          ….
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autor/a</div>
      <div class="quarto-title-meta-contents">
               <p>Javier Rodríguez-Barrios, Kenedith Méndez, Javier de la Hoz </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Fecha de publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 24, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Menú flotante</h2>
   
  <ul>
  <li><a href="#capitulo-1.-fundamentos-de-manipulación-de-datos" id="toc-capitulo-1.-fundamentos-de-manipulación-de-datos" class="nav-link active" data-scroll-target="#capitulo-1.-fundamentos-de-manipulación-de-datos">Capitulo 1. Fundamentos de manipulación de datos</a>
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link" data-scroll-target="#introducción"><strong>Introducción</strong></a></li>
  <li><a href="#objetivo" id="toc-objetivo" class="nav-link" data-scroll-target="#objetivo"><strong>Objetivo</strong></a></li>
  <li><a href="#contenido-del-capítulo" id="toc-contenido-del-capítulo" class="nav-link" data-scroll-target="#contenido-del-capítulo"><strong>Contenido del capítulo</strong></a>
  <ul>
  <li><a href="#lectura-de-bases-de-datos-y-cargar-paquetes" id="toc-lectura-de-bases-de-datos-y-cargar-paquetes" class="nav-link" data-scroll-target="#lectura-de-bases-de-datos-y-cargar-paquetes">Lectura de bases de datos y cargar paquetes</a></li>
  <li><a href="#selección-y-filtrado" id="toc-selección-y-filtrado" class="nav-link" data-scroll-target="#selección-y-filtrado">1.1 Selección y filtrado</a></li>
  <li><a href="#creación-de-nuevas-variables" id="toc-creación-de-nuevas-variables" class="nav-link" data-scroll-target="#creación-de-nuevas-variables">1.2 Creación de nuevas variables</a></li>
  <li><a href="#resumen-estadístico-de-datos-agrupados" id="toc-resumen-estadístico-de-datos-agrupados" class="nav-link" data-scroll-target="#resumen-estadístico-de-datos-agrupados">1.3 Resumen estadístico de datos agrupados</a></li>
  <li><a href="#transformación-de-datos" id="toc-transformación-de-datos" class="nav-link" data-scroll-target="#transformación-de-datos">1.4 Transformación de datos</a></li>
  <li><a href="#transposición-de-datos" id="toc-transposición-de-datos" class="nav-link" data-scroll-target="#transposición-de-datos">1.5 Transposición de datos</a></li>
  <li><a href="#unión-de-datos" id="toc-unión-de-datos" class="nav-link" data-scroll-target="#unión-de-datos">1.6 Unión de datos</a></li>
  <li><a href="#conversión-de-variables-categóricas" id="toc-conversión-de-variables-categóricas" class="nav-link" data-scroll-target="#conversión-de-variables-categóricas">1.6 Conversión de variables categóricas</a></li>
  <li><a href="#abreviar-nombres-de-grupos-biológicos" id="toc-abreviar-nombres-de-grupos-biológicos" class="nav-link" data-scroll-target="#abreviar-nombres-de-grupos-biológicos">1.8 Abreviar nombres de grupos biológicos</a></li>
  <li><a href="#seleccionar-los-5-taxones-más-abundantes" id="toc-seleccionar-los-5-taxones-más-abundantes" class="nav-link" data-scroll-target="#seleccionar-los-5-taxones-más-abundantes">1.9 Seleccionar los 5 taxones más abundantes</a></li>
  <li><a href="#visualización" id="toc-visualización" class="nav-link" data-scroll-target="#visualización">1.10 Visualización</a></li>
  <li><a href="#categorizar-una-variable-contínua" id="toc-categorizar-una-variable-contínua" class="nav-link" data-scroll-target="#categorizar-una-variable-contínua">1.11 Categorizar una variable contínua</a></li>
  <li><a href="#cuestionario" id="toc-cuestionario" class="nav-link" data-scroll-target="#cuestionario">Cuestionario</a></li>
  </ul></li>
  <li><a href="#a.-manejo-de-datos-biológicos-y-ambientales" id="toc-a.-manejo-de-datos-biológicos-y-ambientales" class="nav-link" data-scroll-target="#a.-manejo-de-datos-biológicos-y-ambientales">A. Manejo de datos biológicos y ambientales</a>
  <ul>
  <li><a href="#resumen" id="toc-resumen" class="nav-link" data-scroll-target="#resumen">Resumen</a></li>
  <li><a href="#instalación-y-carga-de-paquetes" id="toc-instalación-y-carga-de-paquetes" class="nav-link" data-scroll-target="#instalación-y-carga-de-paquetes">Instalación y carga de paquetes</a></li>
  <li><a href="#carga-y-exploración-de-datos" id="toc-carga-y-exploración-de-datos" class="nav-link" data-scroll-target="#carga-y-exploración-de-datos">Carga y exploración de datos</a></li>
  <li><a href="#selección-y-filtrado-1" id="toc-selección-y-filtrado-1" class="nav-link" data-scroll-target="#selección-y-filtrado-1">1.1 Selección y filtrado</a></li>
  <li><a href="#selección-y-filtrado-2" id="toc-selección-y-filtrado-2" class="nav-link" data-scroll-target="#selección-y-filtrado-2">1.1 Selección y filtrado</a>
  <ul>
  <li><a href="#creación-de-nuevas-variables-1" id="toc-creación-de-nuevas-variables-1" class="nav-link" data-scroll-target="#creación-de-nuevas-variables-1">1.2 Creación de nuevas variables</a></li>
  <li><a href="#resumen-estadístico-de-datos-agrupados-1" id="toc-resumen-estadístico-de-datos-agrupados-1" class="nav-link" data-scroll-target="#resumen-estadístico-de-datos-agrupados-1">1.3 Resumen estadístico de datos agrupados</a></li>
  <li><a href="#transformación-de-datos-1" id="toc-transformación-de-datos-1" class="nav-link" data-scroll-target="#transformación-de-datos-1">1.4 Transformación de datos</a></li>
  <li><a href="#transposición-de-datos-1" id="toc-transposición-de-datos-1" class="nav-link" data-scroll-target="#transposición-de-datos-1">1.5 Transposición de datos</a></li>
  <li><a href="#unión-de-datos-1" id="toc-unión-de-datos-1" class="nav-link" data-scroll-target="#unión-de-datos-1">1.6 Unión de datos</a></li>
  <li><a href="#conversión-de-variables-categóricas-1" id="toc-conversión-de-variables-categóricas-1" class="nav-link" data-scroll-target="#conversión-de-variables-categóricas-1">1.6 Conversión de variables categóricas</a></li>
  <li><a href="#abreviar-nombres-de-grupos-biológicos-1" id="toc-abreviar-nombres-de-grupos-biológicos-1" class="nav-link" data-scroll-target="#abreviar-nombres-de-grupos-biológicos-1">1.8 Abreviar nombres de grupos biológicos</a></li>
  <li><a href="#seleccionar-los-5-taxones-más-abundantes-1" id="toc-seleccionar-los-5-taxones-más-abundantes-1" class="nav-link" data-scroll-target="#seleccionar-los-5-taxones-más-abundantes-1">1.9 Seleccionar los 5 taxones más abundantes</a></li>
  <li><a href="#visualización-de-factores" id="toc-visualización-de-factores" class="nav-link" data-scroll-target="#visualización-de-factores">1.10 Visualización de factores</a></li>
  <li><a href="#categorizar-una-variable-contínua-1" id="toc-categorizar-una-variable-contínua-1" class="nav-link" data-scroll-target="#categorizar-una-variable-contínua-1">1.11 Categorizar una variable contínua</a>
  <ul class="collapse">
  <li><a href="#a.-método-basado-en-cuantiles" id="toc-a.-método-basado-en-cuantiles" class="nav-link" data-scroll-target="#a.-método-basado-en-cuantiles">a.) Método basado en cuantiles</a></li>
  <li><a href="#b.-método-basado-en-summary" id="toc-b.-método-basado-en-summary" class="nav-link" data-scroll-target="#b.-método-basado-en-summary">b.) Método basado en <code>summary()</code></a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  <li><a href="#cuestionario-1" id="toc-cuestionario-1" class="nav-link" data-scroll-target="#cuestionario-1">Cuestionario</a>
  <ul>
  <li><a href="#exploración-de-datos" id="toc-exploración-de-datos" class="nav-link" data-scroll-target="#exploración-de-datos">1. Exploración de datos</a></li>
  <li><a href="#filtrado-condicional" id="toc-filtrado-condicional" class="nav-link" data-scroll-target="#filtrado-condicional">2. Filtrado condicional</a></li>
  <li><a href="#creación-de-variables" id="toc-creación-de-variables" class="nav-link" data-scroll-target="#creación-de-variables">3. Creación de variables</a></li>
  <li><a href="#resumen-estadístico" id="toc-resumen-estadístico" class="nav-link" data-scroll-target="#resumen-estadístico">4. Resumen estadístico</a></li>
  <li><a href="#transformación-de-datos-2" id="toc-transformación-de-datos-2" class="nav-link" data-scroll-target="#transformación-de-datos-2">5. Transformación de datos</a></li>
  <li><a href="#visualización-de-una-relación-de-variables" id="toc-visualización-de-una-relación-de-variables" class="nav-link" data-scroll-target="#visualización-de-una-relación-de-variables">6. Visualización de una relación de variables</a></li>
  <li><a href="#visualización-de-una-variable-categorizada" id="toc-visualización-de-una-variable-categorizada" class="nav-link" data-scroll-target="#visualización-de-una-variable-categorizada">7. Visualización de una variable categorizada</a>
  <ul>
  <li><a href="#paso-1-categorizar-la-temperatura" id="toc-paso-1-categorizar-la-temperatura" class="nav-link" data-scroll-target="#paso-1-categorizar-la-temperatura">Paso 1: Categorizar la Temperatura</a></li>
  <li><a href="#paso-2-visualizar-la-relación-entre-temperatura-y-abundancia" id="toc-paso-2-visualizar-la-relación-entre-temperatura-y-abundancia" class="nav-link" data-scroll-target="#paso-2-visualizar-la-relación-entre-temperatura-y-abundancia">Paso 2: Visualizar la Relación entre Temperatura y Abundancia</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#b.-fundamentos-de-manipulación-de-datos-caso-invertebrados" id="toc-b.-fundamentos-de-manipulación-de-datos-caso-invertebrados" class="nav-link" data-scroll-target="#b.-fundamentos-de-manipulación-de-datos-caso-invertebrados">B. Fundamentos de manipulación de datos (Caso invertebrados)</a>
  <ul>
  <li><a href="#resumen-1" id="toc-resumen-1" class="nav-link" data-scroll-target="#resumen-1">Resumen</a></li>
  <li><a href="#lectura-de-bases-de-datos-y-cargar-paquetes-1" id="toc-lectura-de-bases-de-datos-y-cargar-paquetes-1" class="nav-link" data-scroll-target="#lectura-de-bases-de-datos-y-cargar-paquetes-1">Lectura de bases de datos y cargar paquetes</a></li>
  <li><a href="#selección-y-filtrado-3" id="toc-selección-y-filtrado-3" class="nav-link" data-scroll-target="#selección-y-filtrado-3">1.1 Selección y filtrado</a></li>
  <li><a href="#creación-de-nuevas-variables-2" id="toc-creación-de-nuevas-variables-2" class="nav-link" data-scroll-target="#creación-de-nuevas-variables-2">1.2 Creación de nuevas variables</a></li>
  <li><a href="#resumen-estadístico-de-datos-agrupados-2" id="toc-resumen-estadístico-de-datos-agrupados-2" class="nav-link" data-scroll-target="#resumen-estadístico-de-datos-agrupados-2">1.3 Resumen estadístico de datos agrupados</a></li>
  <li><a href="#transformación-de-datos-3" id="toc-transformación-de-datos-3" class="nav-link" data-scroll-target="#transformación-de-datos-3">1.4 Transformación de datos</a></li>
  <li><a href="#transposición-de-datos-2" id="toc-transposición-de-datos-2" class="nav-link" data-scroll-target="#transposición-de-datos-2">1.5 Transposición de datos</a></li>
  <li><a href="#unión-de-datos-2" id="toc-unión-de-datos-2" class="nav-link" data-scroll-target="#unión-de-datos-2">1.6 Unión de datos</a></li>
  <li><a href="#conversión-de-variables-categóricas-2" id="toc-conversión-de-variables-categóricas-2" class="nav-link" data-scroll-target="#conversión-de-variables-categóricas-2">1.6 Conversión de variables categóricas</a></li>
  <li><a href="#abreviar-nombres-de-grupos-biológicos-2" id="toc-abreviar-nombres-de-grupos-biológicos-2" class="nav-link" data-scroll-target="#abreviar-nombres-de-grupos-biológicos-2">1.8 Abreviar nombres de grupos biológicos</a></li>
  <li><a href="#seleccionar-los-5-taxones-más-abundantes-2" id="toc-seleccionar-los-5-taxones-más-abundantes-2" class="nav-link" data-scroll-target="#seleccionar-los-5-taxones-más-abundantes-2">1.9 Seleccionar los 5 taxones más abundantes</a></li>
  <li><a href="#visualización-1" id="toc-visualización-1" class="nav-link" data-scroll-target="#visualización-1">1.10 Visualización</a></li>
  <li><a href="#categorizar-una-variable-continua" id="toc-categorizar-una-variable-continua" class="nav-link" data-scroll-target="#categorizar-una-variable-continua">1.11 Categorizar una variable continua</a></li>
  </ul></li>
  <li><a href="#cuestionario-2" id="toc-cuestionario-2" class="nav-link" data-scroll-target="#cuestionario-2">Cuestionario</a>
  <ul>
  <li><a href="#qué-estación-presentó-mayor-abundancia-total-de-órdenes" id="toc-qué-estación-presentó-mayor-abundancia-total-de-órdenes" class="nav-link" data-scroll-target="#qué-estación-presentó-mayor-abundancia-total-de-órdenes">1. ¿Qué estación presentó mayor abundancia total de órdenes?</a></li>
  <li><a href="#qué-familia-presentó-mayor-abundancia-en-taxones2" id="toc-qué-familia-presentó-mayor-abundancia-en-taxones2" class="nav-link" data-scroll-target="#qué-familia-presentó-mayor-abundancia-en-taxones2">2. ¿Qué familia presentó mayor abundancia en <code>Taxones2</code>?</a></li>
  <li><a href="#qué-patrón-se-observa-en-el-gráfico-de-órdenes-más-abundantes" id="toc-qué-patrón-se-observa-en-el-gráfico-de-órdenes-más-abundantes" class="nav-link" data-scroll-target="#qué-patrón-se-observa-en-el-gráfico-de-órdenes-más-abundantes">3. ¿Qué patrón se observa en el gráfico de órdenes más abundantes?</a></li>
  <li><a href="#cuál-fue-el-valor-de-oxígeno-disuelto-más-alto-en-qué-estación" id="toc-cuál-fue-el-valor-de-oxígeno-disuelto-más-alto-en-qué-estación" class="nav-link" data-scroll-target="#cuál-fue-el-valor-de-oxígeno-disuelto-más-alto-en-qué-estación">4. ¿Cuál fue el valor de oxígeno disuelto más alto? ¿en qué estación?</a></li>
  <li><a href="#qué-estación-tuvo-menor-concentración-de-oxígeno-disuelto" id="toc-qué-estación-tuvo-menor-concentración-de-oxígeno-disuelto" class="nav-link" data-scroll-target="#qué-estación-tuvo-menor-concentración-de-oxígeno-disuelto">5. ¿Qué estación tuvo menor concentración de oxígeno disuelto?</a></li>
  <li><a href="#cómo-cambiarían-los-resultados-si-se-analiza-solo-arimaca-y-caracoli" id="toc-cómo-cambiarían-los-resultados-si-se-analiza-solo-arimaca-y-caracoli" class="nav-link" data-scroll-target="#cómo-cambiarían-los-resultados-si-se-analiza-solo-arimaca-y-caracoli">6. ¿Cómo cambiarían los resultados si se analiza solo Arimaca y Caracoli?</a></li>
  <li><a href="#qué-sitio-presentó-mayor-conductividad" id="toc-qué-sitio-presentó-mayor-conductividad" class="nav-link" data-scroll-target="#qué-sitio-presentó-mayor-conductividad">7 ¿Qué sitio presentó mayor conductividad?</a></li>
  </ul></li>
  <li><a href="#conclusión" id="toc-conclusión" class="nav-link" data-scroll-target="#conclusión">Conclusión</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<hr>
<section id="capitulo-1.-fundamentos-de-manipulación-de-datos" class="level1">
<h1>Capitulo 1. Fundamentos de manipulación de datos</h1>
<section id="introducción" class="level3">
<h3 class="anchored" data-anchor-id="introducción"><strong>Introducción</strong></h3>
<p>En los ecosistemas, cada organismo es un dato esperando ser comprendido. Desde el plancton flotando libre en una columna de agua, hasta los macroinvertebrados que habitan el lecho de un río, todos son piezas de un rompecabezas ecológico que cobra sentido cuando sabemos organizar y analizar la información que nos brindan.</p>
<p>Este capítulo introduce los fundamentos esenciales para manipular bases de datos ecológicas y ambientales mediante el lenguaje de programación R y el enfoque del paquete <code>tidyverse</code>. La premisa es simple pero poderosa: si aprendemos a “conversar” con los datos, también podremos escuchar lo que los ecosistemas nos están diciendo.</p>
<p>Trabajaremos con dos casos reales: plancton estuarino y macroinvertebrados del río Gaira, mostrando cómo seleccionar, transformar, integrar y visualizar datos ecológicos para convertirlos en conocimiento. Más allá de la técnica, el propósito es generar una mirada crítica sobre lo que nos cuentan los datos sobre la biodiversidad y el ambiente que habitamos.</p>
</section>
<section id="objetivo" class="level3">
<h3 class="anchored" data-anchor-id="objetivo"><strong>Objetivo</strong></h3>
<p>Entrenar en un <em>flujo reproducible de análisis</em> con tidyverse, aplicable a datos ecológicos.</p>
<hr>
</section>
<section id="contenido-del-capítulo" class="level3">
<h3 class="anchored" data-anchor-id="contenido-del-capítulo"><strong>Contenido del capítulo</strong></h3>
<p>Se realizarán dos ejercicios (A: datos de plancton estudrino, B: datos macroinvertebrados de ríos), cuyos ejercicios tendrán la siguiente secuencia de ejercicios.</p>
<section id="lectura-de-bases-de-datos-y-cargar-paquetes" class="level5">
<h5 class="anchored" data-anchor-id="lectura-de-bases-de-datos-y-cargar-paquetes">Lectura de bases de datos y cargar paquetes</h5>
</section>
<section id="selección-y-filtrado" class="level5">
<h5 class="anchored" data-anchor-id="selección-y-filtrado">1.1 Selección y filtrado</h5>
</section>
<section id="creación-de-nuevas-variables" class="level5">
<h5 class="anchored" data-anchor-id="creación-de-nuevas-variables">1.2 Creación de nuevas variables</h5>
</section>
<section id="resumen-estadístico-de-datos-agrupados" class="level5">
<h5 class="anchored" data-anchor-id="resumen-estadístico-de-datos-agrupados">1.3 Resumen estadístico de datos agrupados</h5>
</section>
<section id="transformación-de-datos" class="level5">
<h5 class="anchored" data-anchor-id="transformación-de-datos">1.4 Transformación de datos</h5>
</section>
<section id="transposición-de-datos" class="level5">
<h5 class="anchored" data-anchor-id="transposición-de-datos">1.5 Transposición de datos</h5>
</section>
<section id="unión-de-datos" class="level5">
<h5 class="anchored" data-anchor-id="unión-de-datos">1.6 Unión de datos</h5>
</section>
<section id="conversión-de-variables-categóricas" class="level5">
<h5 class="anchored" data-anchor-id="conversión-de-variables-categóricas">1.6 Conversión de variables categóricas</h5>
</section>
<section id="abreviar-nombres-de-grupos-biológicos" class="level5">
<h5 class="anchored" data-anchor-id="abreviar-nombres-de-grupos-biológicos">1.8 Abreviar nombres de grupos biológicos</h5>
</section>
<section id="seleccionar-los-5-taxones-más-abundantes" class="level5">
<h5 class="anchored" data-anchor-id="seleccionar-los-5-taxones-más-abundantes">1.9 Seleccionar los 5 taxones más abundantes</h5>
</section>
<section id="visualización" class="level5">
<h5 class="anchored" data-anchor-id="visualización">1.10 Visualización</h5>
</section>
<section id="categorizar-una-variable-contínua" class="level5">
<h5 class="anchored" data-anchor-id="categorizar-una-variable-contínua">1.11 Categorizar una variable contínua</h5>
</section>
<section id="cuestionario" class="level5">
<h5 class="anchored" data-anchor-id="cuestionario">Cuestionario</h5>
<hr>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Instrucciones</strong>: Primer ejercicio en donde se contextualiza a cada procedimiento realizado.</p>
</div>
</div>
<hr>
</section>
</section>
<section id="a.-manejo-de-datos-biológicos-y-ambientales" class="level2">
<h2 class="anchored" data-anchor-id="a.-manejo-de-datos-biológicos-y-ambientales">A. Manejo de datos biológicos y ambientales</h2>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="http://news.bbcimg.co.uk/media/images/52221000/jpg/_52221477_live&amp;deadcopepods2.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Tomado de: Earth News</figcaption><p></p>
</figure>
</div>
<hr>
<section id="resumen" class="level4">
<h4 class="anchored" data-anchor-id="resumen">Resumen</h4>
<p>El presente taller tiene por objeto, brindar pautas generales para el manejo y visualización de datos biológicos en el lenguaje <code>tidyverse</code> de R. Se realizan algunas operaciones generales usando una <strong>base de datos de plancton</strong>, que incorpora variables biológicas y ambientales. Se realizarán ejercicios con los comandos generales de <strong>tidyverse</strong> en el manejo y visualización de datos, utilizando como ejemplo la base de datos de plancton en un estuario de Colombia (<strong>biol</strong>).</p>
<p>La base de datos <strong>“Riqueza”</strong> tiene 498 registros y 8 columnas, incluyendo:</p>
<ul>
<li><strong>Variables categóricas o factores:</strong>
<ul>
<li><code>Station</code> (Estación, numérica pero categórica en contexto)</li>
<li><code>Size</code> (Tamaños de malla del plancton)</li>
<li><code>Layers</code> (Capas o estratos en el gradiente de profundidad)</li>
<li><code>Groups</code> (Grupos de plancton)</li>
</ul></li>
<li><strong>Variables cuantitativas:</strong>
<ul>
<li><code>Abundance</code> (Abundancia de los grupos de plancton)</li>
<li><code>Temperature</code> (Temperatura del agua)</li>
<li><code>Salinity</code> (Salinidad del agua)</li>
<li><code>Density</code> (Densidad de organismos)</li>
</ul></li>
</ul>
</section>
<section id="instalación-y-carga-de-paquetes" class="level4">
<h4 class="anchored" data-anchor-id="instalación-y-carga-de-paquetes">Instalación y carga de paquetes</h4>
<p>Para trabajar con <strong>tidyverse</strong>, primero debemos instalar y cargar los paquetes requeridos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tidyverse") # Descomentar si no está instalado</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="carga-y-exploración-de-datos" class="level4">
<h4 class="anchored" data-anchor-id="carga-y-exploración-de-datos">Carga y exploración de datos</h4>
<p>Utilizamos <code>glimpse</code> para ver la estructura general de la base de datos y <code>summary</code> para obtener estadísticas descriptivas.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar datos desde Excel. Asegúrate de que 'plancton.xlsx' esté en el directorio correcto.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"plancton.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Riqueza"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `glimpse()` proporciona un resumen conciso de la estructura del dataframe,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># mostrando el tipo de cada columna y las primeras observaciones.</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># `summary()` ofrece estadísticas descriptivas básicas para cada columna.</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># glimpse(biol)</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># summary(biol)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="selección-y-filtrado-1" class="level4">
<h4 class="anchored" data-anchor-id="selección-y-filtrado-1">1.1 Selección y filtrado</h4>
</section>
<section id="selección-y-filtrado-2" class="level3">
<h3 class="anchored" data-anchor-id="selección-y-filtrado-2">1.1 Selección y filtrado</h3>
<p>En ecología y ciencias ambientales, el trabajo con datos suele implicar hojas de cálculo extensas, con muchas variables medidas en campo o en laboratorio. No todas esas variables serán relevantes para un análisis determinado. Algunas deben excluirse porque no aportan a la hipótesis; otras porque presentan errores sistemáticos, o simplemente porque queremos enfocarnos en un grupo funcional específico, como insectos acuáticos o copépodos.</p>
<p>Para esas decisiones, el paquete <code>tidyverse</code> ofrece dos funciones fundamentales:</p>
<ul>
<li><code>select()</code> permite elegir solo las columnas que nos interesan. Por ejemplo, si estudiamos la respuesta de <em>Chironomidae</em> y <em>Baetidae</em> a la calidad del agua, podemos quedarnos solo con esos grupos taxonómicos.</li>
<li><code>filter()</code> nos permite conservar solo las filas que cumplen ciertas condiciones. Podemos filtrar, por ejemplo, solo las estaciones aguas abajo o las muestras tomadas en época seca.</li>
</ul>
<p>Ambas funciones ayudan a que nuestro análisis sea más limpio, reproducible y enfocado en los objetivos ecológicos que nos planteamos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar variables clave: `select()` permite elegir columnas específicas por su nombre.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aquí seleccionamos las columnas relevantes para nuestro análisis inicial.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>datos_select <span class="ot">&lt;-</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Station, Size, Layers, Abundance, Temperature, Salinity)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: `head()` muestra las primeras filas del dataframe.</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># `kbl()` y `kable_classic()` se usan para formatear la tabla de salida de forma legible en Quarto.</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_select, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar datos por una condición específica: `filter()` selecciona filas basándose en condiciones lógicas.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># En este caso, filtramos las observaciones donde la temperatura es mayor a 28°C.</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>datos_filtro <span class="ot">=</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Temperature <span class="sc">&gt;</span> <span class="dv">28</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Mostramos las primeras filas del dataframe filtrado para verificar el resultado.</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_filtro, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
   <td style="text-align:right;"> 15.085254 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
   <td style="text-align:right;"> 5.729643 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<section id="creación-de-nuevas-variables-1" class="level4">
<h4 class="anchored" data-anchor-id="creación-de-nuevas-variables-1">1.2 Creación de nuevas variables</h4>
<p>En ecología, a menudo necesitamos ir más allá de los datos crudos para entender procesos complejos. La <strong>creación de nuevas variables</strong> es como sintetizar nuevos conocimientos a partir de observaciones existentes. La función <code>mutate</code> de <code>tidyverse</code> es nuestra herramienta para esta alquimia de datos. Nos permite generar columnas derivadas, como calcular la relación entre la abundancia de plancton y la temperatura del agua. Esta nueva variable podría revelar patrones que no son evidentes al observar las variables por separado, ofreciendo una perspectiva más profunda sobre cómo los organismos responden a su entorno físico. Es una forma de enriquecer nuestros datos, transformándolos en información más significativa y relevante para las preguntas ecológicas que nos planteamos.</p>
<p><code>mutate</code> se usa para generar nuevas variables derivadas de otras columnas.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># o modificar existentes. Aquí creamos `rel_Ab_Temp` dividiendo `Abundance` por `Temperature`.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>biol_rel <span class="ot">=</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rel_Ab_Temp =</span> Abundance <span class="sc">/</span> Temperature)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Mostramos las primeras filas del dataframe con la nueva variable.</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(biol_rel, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
   <th style="text-align:right;"> rel_Ab_Temp </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:right;"> 0.000000 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
   <td style="text-align:right;"> 15.085254 </td>
   <td style="text-align:right;"> 0.000000 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
   <td style="text-align:right;"> 5.729643 </td>
   <td style="text-align:right;"> 0.000000 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:right;"> 1.056193 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="resumen-estadístico-de-datos-agrupados-1" class="level4">
<h4 class="anchored" data-anchor-id="resumen-estadístico-de-datos-agrupados-1">1.3 Resumen estadístico de datos agrupados</h4>
<p>En el estudio de ecosistemas, los datos rara vez se presentan de forma aislada. La capacidad de <strong>resumir datos agrupados</strong> es fundamental para identificar patrones y tendencias en diferentes categorías, como estaciones de muestreo o tamaños de organismos. <code>group_by</code> y <code>summarise</code> de <code>tidyverse</code> actúan como nuestras lupas estadísticas, permitiéndonos consolidar grandes volúmenes de información en métricas clave como medias, desviaciones estándar o varianzas. Esto es vital para comparar, por ejemplo, la abundancia promedio de plancton entre distintas estaciones de un estuario o la variabilidad de la salinidad en diferentes capas de agua. Al agrupar y resumir, transformamos datos individuales en indicadores ecológicos que nos ayudan a comprender la estructura y función de los ecosistemas.</p>
<p><code>group_by</code> permite agrupar datos según categorías para luego aplicar funciones resumen como <code>mean()</code>, <code>sd()</code>, ….</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">=</span> <span class="fu">read_xlsx</span>(<span class="st">"plancton.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Riqueza"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir variables a factores: Es crucial para el análisis categórico.</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `as.factor()` transforma las columnas numéricas en factores para que R las trate como categorías.</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>biol<span class="sc">$</span>Station <span class="ot">=</span> <span class="fu">as.factor</span>(biol<span class="sc">$</span>Station)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>biol<span class="sc">$</span>Size <span class="ot">=</span> <span class="fu">as.factor</span>(biol<span class="sc">$</span>Size)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumen estadístico de un factor "datos_resumidos" por estaciones:</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># `group_by()` agrupa los datos por una o más variables categóricas (Station, Size).</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># `summarise()` calcula estadísticas resumen para cada grupo.</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># `mean(Abundance, na.rm= TRUE)` calcula la media de abundancia, ignorando valores NA.</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># `sd()` calcula la desviación estándar, `var()` la varianza, y `n()` el número de observaciones en cada grupo.</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>datos_resumidos <span class="ot">=</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span>  </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Station, Size) <span class="sc">%&gt;%</span> </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span> (<span class="at">datos.m  =</span> <span class="fu">mean</span>(Abundance, <span class="at">na.rm=</span> <span class="cn">TRUE</span>),  <span class="co"># Medias</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">datos.de =</span> <span class="fu">sd</span>(Abundance, <span class="at">na.rm=</span> <span class="cn">TRUE</span>),    <span class="co"># Desviaciones</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">datos.var=</span> <span class="fu">var</span>(Abundance, <span class="at">na.rm=</span> <span class="cn">TRUE</span>),   <span class="co"># Varianzas</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">datos.n  =</span> <span class="fu">n</span>())              <span class="co"># Tamaño de la muestra</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas de la tabla resumida.</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_resumidos, <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:right;"> datos.m </th>
   <th style="text-align:right;"> datos.de </th>
   <th style="text-align:right;"> datos.var </th>
   <th style="text-align:right;"> datos.n </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:right;"> 409.3617 </td>
   <td style="text-align:right;"> 1335.568 </td>
   <td style="text-align:right;"> 1783742 </td>
   <td style="text-align:right;"> 47 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 500 μm </td>
   <td style="text-align:right;"> 309.1944 </td>
   <td style="text-align:right;"> 1777.470 </td>
   <td style="text-align:right;"> 3159399 </td>
   <td style="text-align:right;"> 36 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:right;"> 340.7872 </td>
   <td style="text-align:right;"> 1283.447 </td>
   <td style="text-align:right;"> 1647237 </td>
   <td style="text-align:right;"> 47 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:left;"> 500 μm </td>
   <td style="text-align:right;"> 265.6944 </td>
   <td style="text-align:right;"> 1545.394 </td>
   <td style="text-align:right;"> 2388243 </td>
   <td style="text-align:right;"> 36 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Agrupamos los datos por <code>Station</code>, <code>Size</code> y <code>Layers</code> y calculamos estadísticas descriptivas clave como la temperatura, salinidad, densidad y la abundancia total. Esto permite obtener un resumen general de las condiciones ambientales y biológicas en diferentes estaciones y capas de muestreo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumen estadístico de dos factores "datos_resumidos1":</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupamos por `Station`, `Size` y `Layers` para un análisis más granular.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `reframe()` es similar a `summarise()` pero permite crear nuevas columnas</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># que pueden tener más de una fila por grupo, útil para cálculos más complejos.</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Aquí calculamos medias, desviaciones estándar, varianzas y el tamaño de la muestra para cada grupo.</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># También se calcula el error estándar (`datos.ee`).</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>datos_resumidos1 <span class="ot">=</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span>  </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Station, Size, Layers) <span class="sc">%&gt;%</span> </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span> (<span class="at">datos.m  =</span> <span class="fu">mean</span>(Abundance, <span class="at">na.rm=</span> <span class="cn">TRUE</span>),    <span class="co"># Medias</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">datos.de =</span> <span class="fu">sd</span>(Abundance, <span class="at">na.rm=</span> <span class="cn">TRUE</span>),    <span class="co"># Desviaciones</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">datos.var=</span> <span class="fu">var</span>(Abundance, <span class="at">na.rm=</span> <span class="cn">TRUE</span>),   <span class="co"># Varianzas</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">datos.n  =</span> <span class="fu">n</span>(),              <span class="co"># Tamaño de la muestra</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">datos.ee =</span> <span class="fu">sd</span>(Abundance, <span class="at">na.rm=</span> <span class="cn">TRUE</span>) <span class="sc">/</span>   <span class="co"># Error estándar</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">sqrt</span>(Abundance)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas de la tabla resumida con dos factores.</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_resumidos1, <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:right;"> datos.m </th>
   <th style="text-align:right;"> datos.de </th>
   <th style="text-align:right;"> datos.var </th>
   <th style="text-align:right;"> datos.n </th>
   <th style="text-align:right;"> datos.ee </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Depth </td>
   <td style="text-align:right;"> 584.5833 </td>
   <td style="text-align:right;"> 1782.971 </td>
   <td style="text-align:right;"> 3178986 </td>
   <td style="text-align:right;"> 24 </td>
   <td style="text-align:right;"> 891.48553 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Depth </td>
   <td style="text-align:right;"> 584.5833 </td>
   <td style="text-align:right;"> 1782.971 </td>
   <td style="text-align:right;"> 3178986 </td>
   <td style="text-align:right;"> 24 </td>
   <td style="text-align:right;"> 257.34971 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Depth </td>
   <td style="text-align:right;"> 584.5833 </td>
   <td style="text-align:right;"> 1782.971 </td>
   <td style="text-align:right;"> 3178986 </td>
   <td style="text-align:right;"> 24 </td>
   <td style="text-align:right;"> 111.43569 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Depth </td>
   <td style="text-align:right;"> 584.5833 </td>
   <td style="text-align:right;"> 1782.971 </td>
   <td style="text-align:right;"> 3178986 </td>
   <td style="text-align:right;"> 24 </td>
   <td style="text-align:right;"> 21.34721 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="transformación-de-datos-1" class="level4">
<h4 class="anchored" data-anchor-id="transformación-de-datos-1">1.4 Transformación de datos</h4>
<p>La <strong>transformación de datos</strong> es una habilidad esencial en el análisis ecológico, permitiéndonos adaptar la estructura de nuestros conjuntos de datos a las necesidades específicas de cada análisis o visualización. Las funciones <code>pivot_longer</code> y <code>pivot_wider</code> de <code>tidyverse</code> son herramientas poderosas que nos permiten cambiar la “forma” de nuestros datos, como si estuviéramos reorganizando una colección de especímenes para un estudio más detallado. <code>pivot_longer</code> es útil para convertir datos de un formato “ancho” (donde cada variable es una columna) a un formato “largo” (donde las variables se apilan en una sola columna), lo cual es ideal para la mayoría de los análisis y gráficos en <code>ggplot2</code>. Por el contrario, <code>pivot_wider</code> nos permite volver al formato ancho cuando sea necesario, por ejemplo, para preparar datos para ciertos modelos estadísticos o para una presentación específica. Estas transformaciones son clave para desbloquear el potencial analítico de nuestros datos ecológicos.</p>
<p><code>pivot_longer</code> cambia la estructura de los datos de ancho a largo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir columnas "Temperature, Salinity, Density" de formato ancho a largo:</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `pivot_longer()` transforma múltiples columnas en dos nuevas columnas: una para los nombres</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># originales de las columnas (`names_to`) y otra para sus valores (`values_to`).</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `cols` especifica las columnas a pivotar.</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>datos_largo <span class="ot">&lt;-</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Temperature, Salinity, Density),  <span class="co"># Estas columnas en 1 sola</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Environmental_Variable"</span>,  <span class="co"># Nombre de la nueva columna</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Value"</span>)                  <span class="co"># Valores de las columnas </span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas del dataframe en formato largo.</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_largo, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:left;"> Environmental_Variable </th>
   <th style="text-align:right;"> Value </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Temperature </td>
   <td style="text-align:right;"> 30.29749 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Salinity </td>
   <td style="text-align:right;"> 34.69981 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Density </td>
   <td style="text-align:right;"> 21.41783 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Temperature </td>
   <td style="text-align:right;"> 29.40959 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p><code>pivot_wider</code> regresa los datos a su formato original (ancho).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir columnas "Temperature, Salinity, Density" de formato largo a ancho:</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `pivot_wider()` es la operación inversa a `pivot_longer()`. Transforma datos de formato largo a ancho.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `names_from` especifica la columna que contiene los nombres de las nuevas columnas.</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `values_from` especifica la columna que contiene los valores para las nuevas columnas.</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># `values_fn = first` maneja posibles duplicados, tomando el primer valor encontrado.</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>datos_ancho <span class="ot">&lt;-</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  datos_largo <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Environmental_Variable,  <span class="co"># Usa esta columna para crear nuevas columnas</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> Value,  <span class="co"># Valores de las nuevas columnas</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fn =</span> first)    <span class="co"># Primer valor encontrado en caso de duplicados</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas del dataframe en formato ancho.</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_ancho, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
   <td style="text-align:right;"> 15.085254 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
   <td style="text-align:right;"> 5.729643 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="transposición-de-datos-1" class="level4">
<h4 class="anchored" data-anchor-id="transposición-de-datos-1">1.5 Transposición de datos</h4>
<p>La <strong>transposición de datos</strong> es una técnica que nos permite cambiar la orientación de nuestra tabla, transformando filas en columnas y viceversa. En ecología, esto es particularmente útil cuando necesitamos reorganizar la información para análisis específicos, como la creación de matrices de especies por sitio para análisis de comunidades o la preparación de datos para ciertos modelos estadísticos. Al transponer, podemos ver nuestros datos desde una nueva perspectiva, lo que a menudo revela patrones ocultos o facilita la aplicación de algoritmos que requieren una estructura de datos particular. Es como reorientar un mapa para ver un territorio desde un ángulo diferente, lo que puede destacar características que antes pasaban desapercibidas.</p>
<p>Los siguientes procedimientos permiten <strong>agrupar</strong> por grupos taxonómicos en filas y estaciones en columnas, para luego <strong>transporner</strong> la base y que pueda ser utilizada en diferentes procedimientos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupar a los taxones en filas y a las estaciones en columnas:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Este bloque de código transforma los datos para agrupar la abundancia por estación y grupo taxonómico,</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># y luego pivota la tabla para que las estaciones sean columnas y los grupos filas.</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `biol[,c(1,3:5)]` selecciona las columnas necesarias: Station, Layers, Groups, Abundance.</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># `group_by(Station, Groups)` agrupa los datos por estación y grupo.</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># `summarise(Abundance = sum(Abundance, na.rm = TRUE))` suma la abundancia para cada grupo/estación.</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># `pivot_wider()` convierte el formato de largo a ancho, con `Station` como nuevas columnas.</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>datos_transp <span class="ot">&lt;-</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  biol[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Station, Groups) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Abundance =</span> <span class="fu">sum</span>(Abundance, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="co"># Suma la ab. por grupo y estación</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Station, </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> Abundance)  <span class="co"># Convierte "Station" en nuevas columnas.</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas de la tabla transpuesta.</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_transp, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> 2 </th>
   <th style="text-align:right;"> 4 </th>
   <th style="text-align:right;"> 7 </th>
   <th style="text-align:right;"> 9 </th>
   <th style="text-align:right;"> 13 </th>
   <th style="text-align:right;"> 15 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 13300 </td>
   <td style="text-align:right;"> 11006 </td>
   <td style="text-align:right;"> 288 </td>
   <td style="text-align:right;"> 1615 </td>
   <td style="text-align:right;"> 3911 </td>
   <td style="text-align:right;"> 3362 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Cyclopoida </td>
   <td style="text-align:right;"> 428 </td>
   <td style="text-align:right;"> 947 </td>
   <td style="text-align:right;"> 29 </td>
   <td style="text-align:right;"> 125 </td>
   <td style="text-align:right;"> 237 </td>
   <td style="text-align:right;"> 307 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Harpacticoida </td>
   <td style="text-align:right;"> 50 </td>
   <td style="text-align:right;"> 33 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 45 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 4 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Huevos de peces </td>
   <td style="text-align:right;"> 168 </td>
   <td style="text-align:right;"> 135 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 20 </td>
   <td style="text-align:right;"> 92 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
</tbody>
</table>

</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ***Nota: ***Esta no es necesaria para el taller</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Transponer la anterior usando pivot_longer y pivot_wider:</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Este bloque demuestra cómo se podría transponer la tabla `datos_transp` de nuevo,</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># aunque se indica que no es esencial para el taller.</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># `pivot_longer(cols = -1)` convierte todas las columnas excepto la primera en filas.</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># `names_to` y `values_to` definen los nombres de las nuevas columnas.</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># `pivot_wider()` luego revierte la operación, usando la primera columna original para crear nuevas columnas.</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>datos_transp1 <span class="ot">&lt;-</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  datos_transp <span class="sc">%&gt;%</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="dv">1</span>,  <span class="co"># Todas las columnas excepto la primera se convierten en filas</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to   =</span> <span class="st">"Station"</span>,    <span class="co"># Los nombres de las columnas originales se almacenan aquí</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to  =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from  =</span> <span class="fu">names</span>(datos_transp)[<span class="dv">1</span>],  <span class="co"># Usa la primera columna original para crear nuevas columnas</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> value)        <span class="co"># Los valores se colocan en las nuevas columnas</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas de la tabla transpuesta nuevamente.</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_transp1, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:right;"> Calanoida </th>
   <th style="text-align:right;"> Cyclopoida </th>
   <th style="text-align:right;"> Harpacticoida </th>
   <th style="text-align:right;"> Huevos de peces </th>
   <th style="text-align:right;"> Larva Nauplio </th>
   <th style="text-align:right;"> Larva Zoea </th>
   <th style="text-align:right;"> Larvas de Crustaceo </th>
   <th style="text-align:right;"> Larvas de peces </th>
   <th style="text-align:right;"> Luciferidae </th>
   <th style="text-align:right;"> Otros </th>
   <th style="text-align:right;"> Quetognatos </th>
   <th style="text-align:right;"> Sergestidae </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:right;"> 13300 </td>
   <td style="text-align:right;"> 428 </td>
   <td style="text-align:right;"> 50 </td>
   <td style="text-align:right;"> 168 </td>
   <td style="text-align:right;"> 57 </td>
   <td style="text-align:right;"> 44 </td>
   <td style="text-align:right;"> 16 </td>
   <td style="text-align:right;"> 2562 </td>
   <td style="text-align:right;"> 12411 </td>
   <td style="text-align:right;"> 30 </td>
   <td style="text-align:right;"> 86 </td>
   <td style="text-align:right;"> 1219 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:right;"> 11006 </td>
   <td style="text-align:right;"> 947 </td>
   <td style="text-align:right;"> 33 </td>
   <td style="text-align:right;"> 135 </td>
   <td style="text-align:right;"> 282 </td>
   <td style="text-align:right;"> 406 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 98 </td>
   <td style="text-align:right;"> 11659 </td>
   <td style="text-align:right;"> 234 </td>
   <td style="text-align:right;"> 385 </td>
   <td style="text-align:right;"> 397 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 7 </td>
   <td style="text-align:right;"> 288 </td>
   <td style="text-align:right;"> 29 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 59 </td>
   <td style="text-align:right;"> 125 </td>
   <td style="text-align:right;"> 25 </td>
   <td style="text-align:right;"> 20 </td>
   <td style="text-align:right;"> 48 </td>
   <td style="text-align:right;"> 74 </td>
   <td style="text-align:right;"> 24 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 9 </td>
   <td style="text-align:right;"> 1615 </td>
   <td style="text-align:right;"> 125 </td>
   <td style="text-align:right;"> 45 </td>
   <td style="text-align:right;"> 20 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 38 </td>
   <td style="text-align:right;"> 27 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 93 </td>
   <td style="text-align:right;"> 81 </td>
   <td style="text-align:right;"> 8 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="unión-de-datos-1" class="level4">
<h4 class="anchored" data-anchor-id="unión-de-datos-1">1.6 Unión de datos</h4>
<p>En la investigación ecológica, es común que la información provenga de diversas fuentes: datos biológicos de una campaña de muestreo, datos fisicoquímicos de estaciones de monitoreo, o información geográfica de sistemas de información. La <strong>unión de datos</strong> es el proceso de integrar estas piezas dispares en un conjunto de datos coherente, como ensamblar las diferentes partes de un ecosistema para entender su funcionamiento integral. La función <code>left_join</code> de <code>tidyverse</code> es una herramienta invaluable para esta tarea, permitiéndonos combinar dataframes basándose en una o más columnas comunes. Esto nos facilita la exploración de relaciones complejas, por ejemplo, cómo la abundancia de una especie de plancton se relaciona con la salinidad o la temperatura del agua en una estación específica. Al unir los datos, construimos una imagen más completa y holística del sistema que estamos estudiando.</p>
<p>Se puede <strong>unir</strong> bases de datos con <code>left_join</code>. Para este ejercicio se crea la variable categórica <strong>Regiones</strong></p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Se requiere a Station como factor: Aseguramos que `Station` sea tratada como una variable categórica.</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>biol<span class="sc">$</span>Station <span class="ot">=</span> <span class="fu">as.factor</span>(biol<span class="sc">$</span>Station)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una base de datos adicional de regiones (nueva variable):</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos un `tibble` (un tipo de dataframe de tidyverse) con estaciones y sus regiones asociadas.</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>Regiones <span class="ot">=</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">Station =</span> <span class="fu">c</span>(<span class="st">"2"</span>,  <span class="st">"4"</span>,  <span class="st">"7"</span>,  <span class="st">"9"</span>, <span class="st">"13"</span>, <span class="st">"15"</span>),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Region =</span> <span class="fu">c</span>(<span class="st">"Norte"</span>, <span class="st">"Sur"</span>, <span class="st">"Este"</span>, <span class="st">"Oeste"</span>, <span class="st">"Central"</span>, <span class="st">"Otras"</span>))</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Unir bases de datos con `left_join()`:</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># `left_join()` combina dos dataframes basándose en una columna común (`Station`).</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Mantiene todas las filas del dataframe de la izquierda (`biol`) y añade las columnas coincidentes del dataframe de la derecha (`Regiones`).</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>biol1 <span class="ot">=</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(Regiones, <span class="at">by=</span> <span class="st">"Station"</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas del dataframe combinado.</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(biol1, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
   <th style="text-align:left;"> Region </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:left;"> Norte </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
   <td style="text-align:right;"> 15.085254 </td>
   <td style="text-align:left;"> Norte </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
   <td style="text-align:right;"> 5.729643 </td>
   <td style="text-align:left;"> Norte </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:left;"> Norte </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="conversión-de-variables-categóricas-1" class="level4">
<h4 class="anchored" data-anchor-id="conversión-de-variables-categóricas-1">1.6 Conversión de variables categóricas</h4>
<p>En el análisis de datos ecológicos, la correcta interpretación de las variables es fundamental. Las <strong>variables categóricas</strong>, como las estaciones de muestreo, los tamaños de malla o las capas de profundidad, a menudo se representan numéricamente en las bases de datos, pero su naturaleza es cualitativa. La <strong>conversión de variables categóricas</strong> a factores en R es un paso crucial para asegurar que el software las interprete correctamente, lo que a su vez optimiza los análisis estadísticos y la visualización. Al definir una columna como factor, le indicamos a R que trate sus valores como niveles discretos, no como números continuos. Esto es vital para realizar comparaciones significativas entre grupos, como la abundancia de especies en diferentes tipos de hábitat o la respuesta de los organismos a distintas condiciones ambientales. Es como etiquetar correctamente nuestras muestras en el laboratorio: una vez que están bien clasificadas, podemos extraer conclusiones más precisas y robustas.</p>
<p>Se convierte a <code>Station</code>, <code>Size</code> y <code>Layers</code> en factores para asegurar que R las reconozca como variables categóricas y optimizar análisis posteriores.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir variables a factores de dos formas:</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Opción antigua (as.factor) para "Station y Size":</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Este método es el tradicional para convertir columnas a factores.</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>biol<span class="sc">$</span>Station <span class="ot">=</span> <span class="fu">as.factor</span>(biol<span class="sc">$</span>Station)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>biol<span class="sc">$</span>Size <span class="ot">=</span> <span class="fu">as.factor</span>(biol<span class="sc">$</span>Size)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Opción con Tidy, (across) para "Station, Size y Layers":</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># `mutate(across())` es una forma más moderna y eficiente de aplicar una función</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># a múltiples columnas. Aquí, convierte `Station`, `Size` y `Layers` a factores.</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">&lt;-</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Station, Size, Layers), as.factor))</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas del dataframe con las variables convertidas.</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(biol, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
   <td style="text-align:right;"> 15.085254 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
   <td style="text-align:right;"> 5.729643 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="abreviar-nombres-de-grupos-biológicos-1" class="level4">
<h4 class="anchored" data-anchor-id="abreviar-nombres-de-grupos-biológicos-1">1.8 Abreviar nombres de grupos biológicos</h4>
<p>En la taxonomía biológica, los nombres científicos pueden ser extensos y complejos, lo que a veces dificulta su uso en visualizaciones y análisis. La <strong>abreviación de nombres de grupos biológicos</strong> es una práctica común que nos permite mantener la información esencial mientras mejoramos la legibilidad de nuestros gráficos y tablas. La función <code>abbreviate()</code> de R es una herramienta útil para esta tarea, creando versiones más cortas de los nombres que conservan su identidad única. Esto es especialmente valioso cuando trabajamos con múltiples taxones en un gráfico, donde nombres largos podrían solaparse o hacer que las etiquetas sean ilegibles. Es como crear códigos de identificación para nuestras especies que sean tanto informativos como prácticos para el análisis y la comunicación de resultados.</p>
<p>Para facilitar la visualización y manipulación de datos, podemos <strong>abreviar</strong> los nombres de los grupos biológicos utilizando <code>abbreviate()</code>. Esto es útil cuando trabajamos con nombres largos que dificultan la lectura en gráficos y tablas. Se crea una nueva columna (<strong>Abrev</strong>) con abreviaciones de los nombres de los grupos taxonómicos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nueva columna "Abrev" al final, con abreviaturas de los taxas:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `mutate()` crea una nueva columna `Abrev` aplicando la función `abbreviate()` a la columna `Groups`.</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `minlength = 4` asegura que las abreviaturas tengan al menos 4 caracteres.</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">=</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Abrev =</span> <span class="fu">abbreviate</span>(Groups, <span class="at">minlength =</span> <span class="dv">4</span>))</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Editar tabla: Muestra las primeras filas del dataframe con la nueva columna de abreviaturas.</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># `html_font = "Cambria"` especifica la fuente para la tabla HTML.</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(biol, <span class="dv">4</span>) <span class="sc">%&gt;%</span>   <span class="co"># head muestra solo las primeras tres filas de la tabla </span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">"Cambria"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
   <th style="text-align:left;"> Abrev </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:left;"> Qtgn </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
   <td style="text-align:right;"> 15.085254 </td>
   <td style="text-align:left;"> Srgs </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
   <td style="text-align:right;"> 5.729643 </td>
   <td style="text-align:left;"> Lcfr </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:left;"> Clnd </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla adicional, con nombres completos y abreviados de los taxones:</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `cbind()` combina columnas para crear un nuevo dataframe.</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Aquí se crea una tabla que muestra los nombres completos de los grupos y sus abreviaturas.</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>tabla <span class="ot">&lt;-</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(<span class="at">Grupos =</span> biol[,<span class="dv">4</span>],</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">Abreviaturas =</span> biol<span class="sc">$</span>Abrev)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Editar tabla: Muestra las primeras filas de la tabla de abreviaturas.</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabla, <span class="dv">4</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">"Cambria"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:left;"> Abreviaturas </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:left;"> Qtgn </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:left;"> Srgs </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:left;"> Lcfr </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:left;"> Clnd </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Se convierten las variables categóricas en <strong>factores</strong> y se agrupan los datos para calcular promedios y totales de las variables ambientales y de abundancia de los taxones seleccionados. Se construye una tabla (<strong>biol_ancho</strong>) que es útil para cuando la base de datos inicial está en <strong>formato largo</strong> y queremos transformarla a <strong>formato ancho</strong>, incluyendo a varios factores o variables agrupadoras, en caso de que se cuentre con ellas (Station, Size, Layers). Se genera una nueva columna <strong>Ref</strong> que resume la identificación de cada combinación de estación, tamaño y capa.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Librería necesaria: `dplyr` es parte de `tidyverse` y es fundamental para la manipulación de datos.</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Procesamiento para ajustar los datos en formato ancho:</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Este bloque de código transforma el dataframe `biol` para crear una tabla en formato ancho (`biol_ancho`).</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. `mutate(across(c(Station, Size, Layers), as.factor))` asegura que las variables agrupadoras sean factores.</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. `group_by(Station, Size, Layers)` agrupa los datos por estas tres variables.</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. `summarize(across(c(Temperature, Salinity, Density), ~round(mean(.),2)))` calcula el promedio</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#    de las variables ambientales para cada grupo y las redondea a dos decimales.</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. `Abundance = list(setNames(tapply(Abundance, Abrev,sum, default = 0), unique(Abrev)))` calcula la suma</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#    de la abundancia para cada abreviatura de taxón dentro de cada grupo y la almacena como una lista.</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. `.groups = "drop"` elimina la agrupación después de la operación de resumen.</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. `unnest_wider(Abundance)` expande la columna `Abundance` (que contiene listas) en nuevas columnas,</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">#    una por cada taxón abreviado, con sus respectivas abundancias.</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. `mutate(Ref = paste0(...))` crea una nueva columna `Ref` concatenando partes de `Station`, `Size` y `Layers`</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">#    para formar un identificador único para cada combinación.</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 8. `select(Ref, everything())` reordena las columnas para que `Ref` sea la primera.</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>biol_ancho <span class="ot">&lt;-</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Variables a factores</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Station, Size, Layers), as.factor)) <span class="sc">%&gt;%</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Variables agrupadoras como </span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Station, Size, Layers) <span class="sc">%&gt;%</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Promedios de las variables ambientales</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(Temperature, Salinity, Density), <span class="sc">~</span><span class="fu">round</span>(<span class="fu">mean</span>(.),<span class="dv">2</span>)),</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Totales de las abundancias por cada factor</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">Abundance =</span> <span class="fu">list</span>(<span class="fu">setNames</span>(<span class="fu">tapply</span>(Abundance, Abrev,sum,</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">default =</span> <span class="dv">0</span>), <span class="fu">unique</span>(Abrev))),</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Corregir algunos errores del agrupamiento</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Separar las abundancias en las columnas de cada taxon</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(Abundance) <span class="sc">%&gt;%</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Crear columna Ref, tomando iniciales de tres factores</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ref =</span> <span class="fu">paste0</span>(<span class="fu">substr</span>(Station, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>               <span class="fu">substr</span>(Size, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>               <span class="fu">substr</span>(Layers, <span class="dv">1</span>, <span class="dv">1</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pasar la columna de referencia (consec) a la 1a columna</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Ref, <span class="fu">everything</span>())</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución: Muestra las primeras filas del dataframe `biol_ancho`.</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(biol_ancho, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Ref </th>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
   <th style="text-align:right;"> Qtgn </th>
   <th style="text-align:right;"> Srgs </th>
   <th style="text-align:right;"> Lcfr </th>
   <th style="text-align:right;"> Clnd </th>
   <th style="text-align:right;"> Cycl </th>
   <th style="text-align:right;"> Hrpc </th>
   <th style="text-align:right;"> Lrdp </th>
   <th style="text-align:right;"> Hvdp </th>
   <th style="text-align:right;"> LrvN </th>
   <th style="text-align:right;"> LrdC </th>
   <th style="text-align:right;"> LrvZ </th>
   <th style="text-align:right;"> Otrs </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 22D </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Depth </td>
   <td style="text-align:right;"> 29.88 </td>
   <td style="text-align:right;"> 25.26 </td>
   <td style="text-align:right;"> 14.40 </td>
   <td style="text-align:right;"> 12672 </td>
   <td style="text-align:right;"> 408 </td>
   <td style="text-align:right;"> 48 </td>
   <td style="text-align:right;"> 135 </td>
   <td style="text-align:right;"> 400 </td>
   <td style="text-align:right;"> 16 </td>
   <td style="text-align:right;"> 68 </td>
   <td style="text-align:right;"> 56 </td>
   <td style="text-align:right;"> 28 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 84 </td>
   <td style="text-align:right;"> 112 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 22S </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:right;"> 29.75 </td>
   <td style="text-align:right;"> 23.27 </td>
   <td style="text-align:right;"> 13.35 </td>
   <td style="text-align:right;"> 568 </td>
   <td style="text-align:right;"> 20 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 28 </td>
   <td style="text-align:right;"> 984 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2488 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1096 </td>
   <td style="text-align:right;"> 24 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 25D </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 500 μm </td>
   <td style="text-align:left;"> Depth </td>
   <td style="text-align:right;"> 29.40 </td>
   <td style="text-align:right;"> 19.97 </td>
   <td style="text-align:right;"> 10.53 </td>
   <td style="text-align:right;"> 50 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 355 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 16 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 9 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 25S </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 500 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:right;"> 29.99 </td>
   <td style="text-align:right;"> 28.66 </td>
   <td style="text-align:right;"> 17.02 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 10672 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="seleccionar-los-5-taxones-más-abundantes-1" class="level4">
<h4 class="anchored" data-anchor-id="seleccionar-los-5-taxones-más-abundantes-1">1.9 Seleccionar los 5 taxones más abundantes</h4>
<p>El siguiente procedimiento es apropiado cuando se tienen <strong>demasiados taxones</strong> y se quiere trabajar con una <strong>versión resumida</strong>, normalmente se escogen los 10 o 15 taxones más abundantes para resumir los análisis, en este ejercicio como se cuenta con pocos taxones, se calcula la <strong>abundancia total</strong> de cada taxón y se seleccionan los <strong>cinco más abundantes</strong>. En <code>biol_selec</code>se seleccionan únicamente los grupos más abundantes del conjunto total.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cinco (5) grupos taxonómicos más abundantes</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>abundantes <span class="ot">&lt;-</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  biol_ancho <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>          <span class="co"># Elimina cualquier agrupación previa</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Qtgn<span class="sc">:</span>Otrs) <span class="sc">%&gt;%</span>  <span class="co"># Selecciona las columnas de los grupos taxonómicos</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                   sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span>  <span class="co"># Calcula la abundancia total de cada grupo</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Grupo"</span>, </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Total"</span>) <span class="sc">%&gt;%</span>  <span class="co"># Convierte a formato largo</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total)) <span class="sc">%&gt;%</span>               <span class="co"># Ordena de mayor a menor</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)                      <span class="co"># 5 grupos más abundantes</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(abundantes, <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Grupo </th>
   <th style="text-align:right;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Qtgn </td>
   <td style="text-align:right;"> 33482 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Cycl </td>
   <td style="text-align:right;"> 24110 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Lrdp </td>
   <td style="text-align:right;"> 2724 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Srgs </td>
   <td style="text-align:right;"> 2073 </td>
  </tr>
</tbody>
</table>

</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar en biol_ancho solo estos 5 taxones más abundantes</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>biol_selec <span class="ot">&lt;-</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  biol_ancho <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Ref, Station, Size, Layers, </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>         Temperature, Salinity, Density, </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>         <span class="fu">all_of</span>(abundantes<span class="sc">$</span>Grupo))  <span class="co"># Mantiene solo los grupos seleccionados</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(biol_selec, <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Ref </th>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
   <th style="text-align:right;"> Qtgn </th>
   <th style="text-align:right;"> Cycl </th>
   <th style="text-align:right;"> Lrdp </th>
   <th style="text-align:right;"> Srgs </th>
   <th style="text-align:right;"> LrdC </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 22D </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Depth </td>
   <td style="text-align:right;"> 29.88 </td>
   <td style="text-align:right;"> 25.26 </td>
   <td style="text-align:right;"> 14.40 </td>
   <td style="text-align:right;"> 12672 </td>
   <td style="text-align:right;"> 400 </td>
   <td style="text-align:right;"> 68 </td>
   <td style="text-align:right;"> 408 </td>
   <td style="text-align:right;"> 3 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 22S </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:right;"> 29.75 </td>
   <td style="text-align:right;"> 23.27 </td>
   <td style="text-align:right;"> 13.35 </td>
   <td style="text-align:right;"> 568 </td>
   <td style="text-align:right;"> 984 </td>
   <td style="text-align:right;"> 2488 </td>
   <td style="text-align:right;"> 20 </td>
   <td style="text-align:right;"> 1096 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 25D </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 500 μm </td>
   <td style="text-align:left;"> Depth </td>
   <td style="text-align:right;"> 29.40 </td>
   <td style="text-align:right;"> 19.97 </td>
   <td style="text-align:right;"> 10.53 </td>
   <td style="text-align:right;"> 50 </td>
   <td style="text-align:right;"> 355 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 25S </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 500 μm </td>
   <td style="text-align:left;"> Surface </td>
   <td style="text-align:right;"> 29.99 </td>
   <td style="text-align:right;"> 28.66 </td>
   <td style="text-align:right;"> 17.02 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 10672 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="visualización-de-factores" class="level4">
<h4 class="anchored" data-anchor-id="visualización-de-factores">1.10 Visualización de factores</h4>
<p><code>ggplot2</code> nos permite crear gráficos para explorar los datos. Se genera una <strong>figura de cajas</strong> para visualizar las diferencias en la abundancia del plancton, entre las diferentes estaciones del estuario evaluado.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir variables a factores en caso que se requiera</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">&lt;-</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Station, Size, Layers), as.factor))</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico de caja de la abundancia por estación</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(biol, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(Station), <span class="at">y =</span> Abundance)) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">factor</span>(Station))) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log10"</span>) <span class="sc">+</span>  <span class="co"># Aplicar la transformación logarítmica</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'#fc8d59'</span>,<span class="st">'#ffffbf'</span>,<span class="st">'#99d594'</span>,<span class="st">'#377eb8'</span>,<span class="st">'#e78ac3'</span>,<span class="st">'#7570b3'</span>)) <span class="sc">+</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de la Abundancia por Estación"</span>, </span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Estaciones"</span>, <span class="at">fill =</span> <span class="st">"Estaciones"</span>, </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">expression</span>(log[<span class="dv">10</span>]<span class="sc">~</span>(Abundancia<span class="sc">~</span>indv.<span class="sc">~</span>m<span class="sc">^-</span><span class="dv">3</span>))</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),  </span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Capitulo1.datos_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># probar sacale_fill_manual, con: scale_color_viridis(discrete = TRUE)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Con el comando <code>aes(fill = Layers)</code> se incorporan las capas superficial y profunda en las diferentes zonas.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)  <span class="co"># Para manipulación de factores</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar etiquetas de Layers con recode_factor()</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">&lt;-</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Layers =</span> <span class="fu">recode_factor</span>(Layers, </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Depth"</span> <span class="ot">=</span> <span class="st">"Profunda"</span>, </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Surface"</span> <span class="ot">=</span> <span class="st">"Superficial"</span>))</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico de caja de la abundancia por estación</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(biol, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(Station), <span class="at">y =</span> Abundance)) <span class="sc">+</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Layers)) <span class="sc">+</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log10"</span>) <span class="sc">+</span>  <span class="co"># Aplicar la transformación logarítmica</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de la Abundancia por Estación"</span>, </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Estaciones"</span>, <span class="at">fill =</span> <span class="st">"Capas"</span>,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">expression</span>(log[<span class="dv">10</span>]<span class="sc">~</span>(Abundancia<span class="sc">~</span>indv.<span class="sc">~</span>m<span class="sc">^-</span><span class="dv">3</span>))</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),  </span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Capitulo1.datos_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>La capa <code>facet_wrap()</code> permite incluir más factores como el del ojo de malla usado para la colecta del plancton.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)  <span class="co"># Para manipulación de factores</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar etiquetas de Layers con recode_factor()</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">&lt;-</span> </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Layers =</span> <span class="fu">recode_factor</span>(Layers, </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Depth"</span> <span class="ot">=</span> <span class="st">"Profunda"</span>, </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Surface"</span> <span class="ot">=</span> <span class="st">"Superficial"</span>))</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear gráfico con etiquetas de valores atípicos redondeados</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(biol, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(Station), <span class="at">y =</span> Abundance)) <span class="sc">+</span> </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Layers)) <span class="sc">+</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estaciones"</span>, <span class="at">fill =</span> <span class="st">"Capas"</span>,</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">expression</span>(log[<span class="dv">10</span>]<span class="sc">~</span>(Abundancia<span class="sc">~</span>indv.<span class="sc">~</span>m<span class="sc">^-</span><span class="dv">3</span>))</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log10"</span>) <span class="sc">+</span>  <span class="co"># Aplicar la transformación logarítmica</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Size , <span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">strip.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),  </span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Capitulo1.datos_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="categorizar-una-variable-contínua-1" class="level4">
<h4 class="anchored" data-anchor-id="categorizar-una-variable-contínua-1">1.11 Categorizar una variable contínua</h4>
<p>En algunos casos, es útil transformar una variable continua en una categórica para facilitar la comparación y visualización de datos. En este caso, convertimos <code>Salinity</code> en una variable categórica con tres niveles: <strong>“Baja”, “Media” y “Alta”</strong>.</p>
<section id="a.-método-basado-en-cuantiles" class="level5">
<h5 class="anchored" data-anchor-id="a.-método-basado-en-cuantiles">a.) Método basado en cuantiles</h5>
<p>Este método divide la variable en tres partes iguales (terciles) utilizando los cuantiles de la distribución. En el siguiente ejercicio se crea una variable categórica llamada <strong>Salinity_Level</strong>.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">&lt;-</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Salinity_Level =</span> <span class="fu">case_when</span>(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    Salinity <span class="sc">&lt;=</span> <span class="fu">quantile</span>(Salinity, <span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Baja"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    Salinity <span class="sc">&lt;=</span> <span class="fu">quantile</span>(Salinity, <span class="dv">2</span><span class="sc">/</span><span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Media"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    Salinity <span class="sc">&lt;=</span> <span class="fu">quantile</span>(Salinity, <span class="dv">3</span><span class="sc">/</span><span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Alta"</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Se puede resumir el nivel alto por el comando "TRUE ~ "Alta"". </span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(biol, <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
   <th style="text-align:left;"> Abrev </th>
   <th style="text-align:left;"> Salinity_Level </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Superficial </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:left;"> Qtgn </td>
   <td style="text-align:left;"> Alta </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Superficial </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
   <td style="text-align:right;"> 15.085254 </td>
   <td style="text-align:left;"> Srgs </td>
   <td style="text-align:left;"> Baja </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Superficial </td>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
   <td style="text-align:right;"> 5.729643 </td>
   <td style="text-align:left;"> Lcfr </td>
   <td style="text-align:left;"> Baja </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Superficial </td>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:left;"> Clnd </td>
   <td style="text-align:left;"> Alta </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### **Distribución de la Abundancia por Niveles de Salinidad**</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(biol, <span class="fu">aes</span>(<span class="at">x =</span> Salinity_Level, <span class="at">y =</span> Abundance)) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Salinity_Level)) <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log10"</span>) <span class="sc">+</span>  <span class="co"># Aplicar la transformación logarítmica</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'#fc8d59'</span>,<span class="st">'#99d594'</span>,<span class="st">'#377eb8'</span>)) <span class="sc">+</span>  <span class="co"># Colores personalizados</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de la Abundancia por Niveles de Salinidad"</span>, </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Niveles de Salinidad"</span>, <span class="at">fill =</span> <span class="st">"Salinidad"</span>, </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="fu">expression</span>(log[<span class="dv">10</span>]<span class="sc">~</span>(Abundancia<span class="sc">~</span>indv.<span class="sc">~</span>m<span class="sc">^-</span><span class="dv">3</span>))</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),  </span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Capitulo1.datos_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="b.-método-basado-en-summary" class="level5">
<h5 class="anchored" data-anchor-id="b.-método-basado-en-summary">b.) Método basado en <code>summary()</code></h5>
<p>Otra forma de categorizar <code>Salinity</code> es usar la función <code>summary()</code> para obtener los valores clave de la variable y definir manualmente los rangos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(biol<span class="sc">$</span>Salinity)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  12.39   25.83   31.04   28.50   33.81   35.03 </code></pre>
</div>
</div>
<p>Con base en estos valores, se puede definir los niveles de salinidad según su distribución:</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">&lt;-</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  biol <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Salinity_Level =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    Salinity <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"Baja"</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    Salinity <span class="sc">&gt;=</span> <span class="dv">30</span> <span class="sc">&amp;</span> Salinity <span class="sc">&lt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"Media"</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    Salinity <span class="sc">&gt;=</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"Alta"</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Se puede resumir el nivel alto por el comando "TRUE ~ "Alta"". </span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Validar distribución</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(biol, <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Station </th>
   <th style="text-align:left;"> Size </th>
   <th style="text-align:left;"> Layers </th>
   <th style="text-align:left;"> Groups </th>
   <th style="text-align:right;"> Abundance </th>
   <th style="text-align:right;"> Temperature </th>
   <th style="text-align:right;"> Salinity </th>
   <th style="text-align:right;"> Density </th>
   <th style="text-align:left;"> Abrev </th>
   <th style="text-align:left;"> Salinity_Level </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Superficial </td>
   <td style="text-align:left;"> Quetognatos </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:left;"> Qtgn </td>
   <td style="text-align:left;"> Media </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Superficial </td>
   <td style="text-align:left;"> Sergestidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.40959 </td>
   <td style="text-align:right;"> 25.83323 </td>
   <td style="text-align:right;"> 15.085254 </td>
   <td style="text-align:left;"> Srgs </td>
   <td style="text-align:left;"> Baja </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Superficial </td>
   <td style="text-align:left;"> Luciferidae </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 29.59008 </td>
   <td style="text-align:right;"> 12.38513 </td>
   <td style="text-align:right;"> 5.729643 </td>
   <td style="text-align:left;"> Lcfr </td>
   <td style="text-align:left;"> Baja </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 250 μm </td>
   <td style="text-align:left;"> Superficial </td>
   <td style="text-align:left;"> Calanoida </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 30.29749 </td>
   <td style="text-align:right;"> 34.69981 </td>
   <td style="text-align:right;"> 21.417828 </td>
   <td style="text-align:left;"> Clnd </td>
   <td style="text-align:left;"> Media </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Este método permite una categorización más detallada sobre los valores de corte, basado en información ambiental del lugar o de estudios previos.</p>
<hr>
</section>
</section>
</section>
</section>
<section id="cuestionario-1" class="level2">
<h2 class="anchored" data-anchor-id="cuestionario-1">Cuestionario</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Instrucciones</strong>: Responde cada pregunta usando el código y los resultados obtenidos en los ejercicios anteriores.</p>
</div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar datos desde Excel</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>biol <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"plancton.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Riqueza"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="exploración-de-datos" class="level4">
<h4 class="anchored" data-anchor-id="exploración-de-datos">1. Exploración de datos</h4>
<p><strong>Pregunta:</strong> ¿Cuántas observaciones hay por cada categoría de <code>Size</code>?</p>
<p><strong>Pregunta:</strong> ¿Cuántas observaciones hay por cada <code>Size</code> y <code>Layers</code>?</p>
</section>
<section id="filtrado-condicional" class="level4">
<h4 class="anchored" data-anchor-id="filtrado-condicional">2. Filtrado condicional</h4>
<p><strong>Pregunta:</strong> Encuentra todas las <strong>observaciones</strong> donde la <strong>salinidad</strong> (<code>Salinity</code>) es <strong>mayor a 35</strong>.</p>
</section>
<section id="creación-de-variables" class="level4">
<h4 class="anchored" data-anchor-id="creación-de-variables">3. Creación de variables</h4>
<p><strong>Pregunta:</strong> Calcula una nueva variable que sea la relación entre <code>Density</code> y <code>Temperature</code>.</p>
<p><strong>Pregunta:</strong> Calcula una <strong>nueva variable</strong> con la relación entre <code>Abundance</code> y <code>Density</code>.</p>
</section>
<section id="resumen-estadístico" class="level4">
<h4 class="anchored" data-anchor-id="resumen-estadístico">4. Resumen estadístico</h4>
<p><strong>Pregunta:</strong> Calcula los valores máximos, mínimos, la mediana, el rango y el coeficiente de variación de <code>abundancia</code> por cada combinación de <code>Size</code> y <code>Layers</code>.</p>
</section>
<section id="transformación-de-datos-2" class="level4">
<h4 class="anchored" data-anchor-id="transformación-de-datos-2">5. Transformación de datos</h4>
<p><strong>Pregunta:</strong> Convierte los <strong>datos</strong> a <strong>formato largo</strong>.</p>
<p><strong>Pregunta:</strong> Convierte los <strong>datos ambientales</strong> (<code>Temperature</code>, <code>Salinity</code>, <code>Density</code>) a <strong>formato largo</strong>.</p>
</section>
<section id="visualización-de-una-relación-de-variables" class="level4">
<h4 class="anchored" data-anchor-id="visualización-de-una-relación-de-variables">6. Visualización de una relación de variables</h4>
<p><strong>Pregunta:</strong> Crea un gráfico de dispersión donde el eje X sea la salinidad (<code>Salinity</code>) y el eje Y la temperatura (<code>Temperature</code>), diferenciando por <code>Layers</code>.</p>
</section>
<section id="visualización-de-una-variable-categorizada" class="level4">
<h4 class="anchored" data-anchor-id="visualización-de-una-variable-categorizada">7. Visualización de una variable categorizada</h4>
<p><strong>Pregunta:</strong> Categoriza a la temperatura en tres niveles y visualizar su relación con la abundancia.</p>
<section id="paso-1-categorizar-la-temperatura" class="level5">
<h5 class="anchored" data-anchor-id="paso-1-categorizar-la-temperatura">Paso 1: Categorizar la Temperatura</h5>
<p><strong>Pregunta:</strong> Utilizar cuantiles, transformamos <code>Temperature</code> en tres niveles: <strong>Baja, Media y Alta</strong>.</p>
</section>
<section id="paso-2-visualizar-la-relación-entre-temperatura-y-abundancia" class="level5">
<h5 class="anchored" data-anchor-id="paso-2-visualizar-la-relación-entre-temperatura-y-abundancia">Paso 2: Visualizar la Relación entre Temperatura y Abundancia</h5>
<hr>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Instrucciones</strong>: Segundo ejercicio en donde se contextualiza a cada procedimiento realizado.</p>
</div>
</div>
<hr>
</section>
</section>
</section>
<section id="b.-fundamentos-de-manipulación-de-datos-caso-invertebrados" class="level2">
<h2 class="anchored" data-anchor-id="b.-fundamentos-de-manipulación-de-datos-caso-invertebrados">B. Fundamentos de manipulación de datos (Caso invertebrados)</h2>
<p><img src="Imagen1.png" class="img-fluid" width="593"></p>
<hr>
<section id="resumen-1" class="level4">
<h4 class="anchored" data-anchor-id="resumen-1">Resumen</h4>
<p>Este segundo caso trabaja con macroinvertebrados acuáticos y variables fisicoquímicas del río Gaira (Santa Marta), registradas en condiciones naturales mediante muestreo estandarizado por hábitats. A diferencia del caso de plancton, esta base está organizada en tres hojas del archivo <code>invert.xlsx</code>: <code>Taxones1</code>, <code>Taxones2</code> y <code>fquímicos</code>.</p>
<ul>
<li><strong><code>Taxones1</code></strong> contiene datos detallados por tipo de microhábitat (arena, grava, hoja, etc.) y estación de muestreo.</li>
<li><strong><code>Taxones2</code></strong> presenta los datos resumidos por estación.</li>
<li><strong><code>fquímicos</code></strong> incluye variables ambientales como oxígeno disuelto, amonio, nitratos, temperatura, velocidad, pH, entre otras.</li>
</ul>
<p>Estas bases permiten aplicar herramientas de filtrado, transformación, unión de datos, categorización y visualización, con un enfoque orientado a describir patrones ecológicos e interpretar relaciones entre comunidad biótica y ambiente.</p>
<hr>
</section>
<section id="lectura-de-bases-de-datos-y-cargar-paquetes-1" class="level4">
<h4 class="anchored" data-anchor-id="lectura-de-bases-de-datos-y-cargar-paquetes-1">Lectura de bases de datos y cargar paquetes</h4>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar las librerías necesarias para la manipulación y visualización de datos.</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `tidyverse` es una colección de paquetes de R diseñados para la ciencia de datos,</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># que incluye `dplyr` para manipulación de datos y `ggplot2` para visualización.</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `readxl` es necesario para leer archivos `.xlsx`.</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar las librerías necesarias para la manipulación de datos de invertebrados.</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># `tidyverse` para manipulación general, `readxl` para leer archivos Excel,</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># `janitor` para limpiar nombres de columnas y `stringr` para manipulación de cadenas de texto.</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar datos desde Excel. Asegúrate de que invert.xlsx esté en el directorio correcto.</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Se cargan tres hojas diferentes del mismo archivo Excel en dataframes separados.</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>inv1 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"invert.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Taxones1"</span>) </span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>inv2 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"invert.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Taxones2"</span>) </span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>fq   <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"invert.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"fquímicos"</span>) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
</section>
<section id="selección-y-filtrado-3" class="level4">
<h4 class="anchored" data-anchor-id="selección-y-filtrado-3">1.1 Selección y filtrado</h4>
<p><code>select</code> permite escoger columnas específicas, mientras que <code>filter</code> se usa para seleccionar filas según condiciones.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar columnas específicas: `select()` elige las columnas por nombre.</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>inv1a <span class="ot">&lt;-</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>inv1 <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sitio, Baetidae, Belidae, Chironomidae)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra a las primeras filas del dataframe filtrado para verificar el resultado.</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(inv1a, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Sitio </th>
   <th style="text-align:right;"> Baetidae </th>
   <th style="text-align:right;"> Belidae </th>
   <th style="text-align:right;"> Chironomidae </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:right;"> 14 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Caracoli </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
</tbody>
</table>

</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar filas: `filter()` selecciona filas basándose en una condición.</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aquí, se excluyen las filas donde el `Sitio` es "Caracoli".</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>inv2a <span class="ot">&lt;-</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>inv2 <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sitio <span class="sc">!=</span> <span class="st">"Caracoli"</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra a las primeras filas del dataframe filtrado para verificar el resultado.</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(inv2a, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Sitio </th>
   <th style="text-align:right;"> Baetidae </th>
   <th style="text-align:right;"> Belidae </th>
   <th style="text-align:right;"> Blephariceridae </th>
   <th style="text-align:right;"> Calopterygidae </th>
   <th style="text-align:right;"> Ceratopogonidae </th>
   <th style="text-align:right;"> Chironomidae </th>
   <th style="text-align:right;"> Coenagrionidae </th>
   <th style="text-align:right;"> Corydalidae </th>
   <th style="text-align:right;"> Crambidae </th>
   <th style="text-align:right;"> Dixidae </th>
   <th style="text-align:right;"> Dugesiidae </th>
   <th style="text-align:right;"> Elmidae </th>
   <th style="text-align:right;"> Empididae </th>
   <th style="text-align:right;"> Gomphidae </th>
   <th style="text-align:right;"> Hydrobiidae </th>
   <th style="text-align:right;"> Hydropsychidae </th>
   <th style="text-align:right;"> Leptoceridae </th>
   <th style="text-align:right;"> Leptohyphidae </th>
   <th style="text-align:right;"> Leptophlebiidae </th>
   <th style="text-align:right;"> Libellulidae </th>
   <th style="text-align:right;"> Limnesiidae </th>
   <th style="text-align:right;"> Lumbriculidae </th>
   <th style="text-align:right;"> Naucoridae </th>
   <th style="text-align:right;"> Oligoneuriidae </th>
   <th style="text-align:right;"> Perlidae </th>
   <th style="text-align:right;"> Psephenidae </th>
   <th style="text-align:right;"> Psychodidae </th>
   <th style="text-align:right;"> Ptilodactylidae </th>
   <th style="text-align:right;"> Simuliidae </th>
   <th style="text-align:right;"> Tipulidae </th>
   <th style="text-align:right;"> Veliidae </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:right;"> 45 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 23 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Pozo Azul </td>
   <td style="text-align:right;"> 95 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 19 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 65 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 41 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 49 </td>
   <td style="text-align:right;"> 29 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 21 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 69 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 34 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<hr>
</section>
<section id="creación-de-nuevas-variables-2" class="level4">
<h4 class="anchored" data-anchor-id="creación-de-nuevas-variables-2">1.2 Creación de nuevas variables</h4>
<p><code>mutate</code> se usa para generar nuevas variables derivadas de otras columnas.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una nueva variable `Abundancia`:</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `mutate()` añade una nueva columna `Abundancia` al dataframe `inv1`.</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `rowSums(across(c(-Sitio,-Microh,-Total)))` calcula la suma de las filas</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># para todas las columnas excepto `Sitio`, `Microh` y `Total`, asumiendo que el resto son taxones.</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>inv1 <span class="ot">&lt;-</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  inv1 <span class="sc">%&gt;%</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Abundancia =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="sc">-</span>Sitio,<span class="sc">-</span>Microh,<span class="sc">-</span>Total))))</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra a las primeras filas del dataframe filtrado para verificar el resultado.</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(inv1, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Sitio </th>
   <th style="text-align:left;"> Microh </th>
   <th style="text-align:right;"> Baetidae </th>
   <th style="text-align:right;"> Belidae </th>
   <th style="text-align:right;"> Blephariceridae </th>
   <th style="text-align:right;"> Calopterygidae </th>
   <th style="text-align:right;"> Ceratopogonidae </th>
   <th style="text-align:right;"> Chironomidae </th>
   <th style="text-align:right;"> Coenagrionidae </th>
   <th style="text-align:right;"> Corydalidae </th>
   <th style="text-align:right;"> Crambidae </th>
   <th style="text-align:right;"> Dixidae </th>
   <th style="text-align:right;"> Dugesiidae </th>
   <th style="text-align:right;"> Elmidae </th>
   <th style="text-align:right;"> Empididae </th>
   <th style="text-align:right;"> Gomphidae </th>
   <th style="text-align:right;"> Hydrobiidae </th>
   <th style="text-align:right;"> Hydropsychidae </th>
   <th style="text-align:right;"> Leptoceridae </th>
   <th style="text-align:right;"> Leptohyphidae </th>
   <th style="text-align:right;"> Leptophlebiidae </th>
   <th style="text-align:right;"> Libellulidae </th>
   <th style="text-align:right;"> Limnesiidae </th>
   <th style="text-align:right;"> Lumbriculidae </th>
   <th style="text-align:right;"> Naucoridae </th>
   <th style="text-align:right;"> Oligoneuriidae </th>
   <th style="text-align:right;"> Perlidae </th>
   <th style="text-align:right;"> Psephenidae </th>
   <th style="text-align:right;"> Psychodidae </th>
   <th style="text-align:right;"> Ptilodactylidae </th>
   <th style="text-align:right;"> Simuliidae </th>
   <th style="text-align:right;"> Tipulidae </th>
   <th style="text-align:right;"> Veliidae </th>
   <th style="text-align:right;"> Total </th>
   <th style="text-align:right;"> Abundancia </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Arena </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 8 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Grava </td>
   <td style="text-align:right;"> 14 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 63 </td>
   <td style="text-align:right;"> 63 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Hoja </td>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 70 </td>
   <td style="text-align:right;"> 70 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Caracoli </td>
   <td style="text-align:left;"> Arena </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 37 </td>
   <td style="text-align:right;"> 37 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<hr>
</section>
<section id="resumen-estadístico-de-datos-agrupados-2" class="level4">
<h4 class="anchored" data-anchor-id="resumen-estadístico-de-datos-agrupados-2">1.3 Resumen estadístico de datos agrupados</h4>
<p>Se agrupan los datos por sitio (Sitio) y se calcula la abundancia promedio por sitio usando la suma de las columnas taxonómicas. <code>group_by</code> permite agrupar datos según categorías para luego aplicar funciones resumen como <code>mean()</code>, <code>sd()</code>, ….</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupar por `Sitio` y calcular la abundancia promedio:</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `group_by(Sitio)` agrupa el dataframe `inv1` por la columna `Sitio`.</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `summarise(prom_abundancia = mean(Total, na.rm = TRUE))` calcula la media de la columna `Total`</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># (que representa la abundancia total) para cada grupo de `Sitio`, ignorando los valores NA.</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>inv1b <span class="ot">&lt;-</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>inv1 <span class="sc">%&gt;%</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Sitio) <span class="sc">%&gt;%</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prom_abundancia =</span> <span class="fu">mean</span>(Total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra a las primeras filas del dataframe filtrado para verificar el resultado.</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(inv1b, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Sitio </th>
   <th style="text-align:right;"> prom_abundancia </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:right;"> 47.00000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Caracoli </td>
   <td style="text-align:right;"> 66.33333 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> PozoAzul </td>
   <td style="text-align:right;"> 170.00000 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<hr>
</section>
<section id="transformación-de-datos-3" class="level4">
<h4 class="anchored" data-anchor-id="transformación-de-datos-3">1.4 Transformación de datos</h4>
<p>Se aplica transformación logarítmica log(x+1) a las columnas numéricas (excepto Sitio) para estabilizar la varianza y normalizar las distribuciones.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar transformación logarítmica a las columnas numéricas:</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `mutate(across(-Sitio, log1p))` aplica la función `log1p` (log(x+1)) a todas las columnas</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># excepto `Sitio`. Esta transformación es útil para datos con distribuciones sesgadas,</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># como las abundancias, para hacerlas más normales y reducir la influencia de valores extremos.</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>inv2_log <span class="ot">&lt;-</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  inv2 <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>Sitio, log1p))</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra a las primeras filas del dataframe filtrado para verificar el resultado.</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(inv2_log, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Sitio </th>
   <th style="text-align:right;"> Baetidae </th>
   <th style="text-align:right;"> Belidae </th>
   <th style="text-align:right;"> Blephariceridae </th>
   <th style="text-align:right;"> Calopterygidae </th>
   <th style="text-align:right;"> Ceratopogonidae </th>
   <th style="text-align:right;"> Chironomidae </th>
   <th style="text-align:right;"> Coenagrionidae </th>
   <th style="text-align:right;"> Corydalidae </th>
   <th style="text-align:right;"> Crambidae </th>
   <th style="text-align:right;"> Dixidae </th>
   <th style="text-align:right;"> Dugesiidae </th>
   <th style="text-align:right;"> Elmidae </th>
   <th style="text-align:right;"> Empididae </th>
   <th style="text-align:right;"> Gomphidae </th>
   <th style="text-align:right;"> Hydrobiidae </th>
   <th style="text-align:right;"> Hydropsychidae </th>
   <th style="text-align:right;"> Leptoceridae </th>
   <th style="text-align:right;"> Leptohyphidae </th>
   <th style="text-align:right;"> Leptophlebiidae </th>
   <th style="text-align:right;"> Libellulidae </th>
   <th style="text-align:right;"> Limnesiidae </th>
   <th style="text-align:right;"> Lumbriculidae </th>
   <th style="text-align:right;"> Naucoridae </th>
   <th style="text-align:right;"> Oligoneuriidae </th>
   <th style="text-align:right;"> Perlidae </th>
   <th style="text-align:right;"> Psephenidae </th>
   <th style="text-align:right;"> Psychodidae </th>
   <th style="text-align:right;"> Ptilodactylidae </th>
   <th style="text-align:right;"> Simuliidae </th>
   <th style="text-align:right;"> Tipulidae </th>
   <th style="text-align:right;"> Veliidae </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:right;"> 3.828641 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 1.386294 </td>
   <td style="text-align:right;"> 1.386294 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 3.178054 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 1.6094379 </td>
   <td style="text-align:right;"> 1.386294 </td>
   <td style="text-align:right;"> 1.609438 </td>
   <td style="text-align:right;"> 1.791759 </td>
   <td style="text-align:right;"> 2.890372 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 1.098612 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 1.945910 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 2.944439 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 1.0986123 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Caracoli </td>
   <td style="text-align:right;"> 2.944439 </td>
   <td style="text-align:right;"> 1.098612 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 2.833213 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 3.713572 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 1.386294 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 2.772589 </td>
   <td style="text-align:right;"> 2.564949 </td>
   <td style="text-align:right;"> 2.397895 </td>
   <td style="text-align:right;"> 3.583519 </td>
   <td style="text-align:right;"> 2.197225 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 2.3025851 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 2.484907 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 1.0986123 </td>
   <td style="text-align:right;"> 2.639057 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 0.6931472 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Pozo Azul </td>
   <td style="text-align:right;"> 4.564348 </td>
   <td style="text-align:right;"> 1.098612 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 2.995732 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 2.3978953 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 4.189655 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 2.079442 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 2.772589 </td>
   <td style="text-align:right;"> 3.737670 </td>
   <td style="text-align:right;"> 1.945910 </td>
   <td style="text-align:right;"> 3.912023 </td>
   <td style="text-align:right;"> 3.401197 </td>
   <td style="text-align:right;"> 0.000000 </td>
   <td style="text-align:right;"> 1.7917595 </td>
   <td style="text-align:right;"> 3.0910425 </td>
   <td style="text-align:right;"> 1.7917595 </td>
   <td style="text-align:right;"> 4.248495 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 0.6931472 </td>
   <td style="text-align:right;"> 2.3025851 </td>
   <td style="text-align:right;"> 2.890372 </td>
   <td style="text-align:right;"> 1.386294 </td>
   <td style="text-align:right;"> 3.5553481 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<hr>
</section>
<section id="transposición-de-datos-2" class="level4">
<h4 class="anchored" data-anchor-id="transposición-de-datos-2">1.5 Transposición de datos</h4>
<p>Se convierte la base de datos de formato ancho a formato largo, generando una columna para la familia y otra para su abundancia. <code>pivot_longer</code> cambia la estructura de los datos de ancho a largo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir de formato ancho a largo: `pivot_longer()` transforma las columnas de taxones</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># en dos nuevas columnas: `familia` (para los nombres de los taxones) y `abundancia` (para sus valores).</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `-Sitio` indica que todas las columnas excepto `Sitio` deben ser pivotadas.</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>inv2_long <span class="ot">&lt;-</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  inv2 <span class="sc">%&gt;%</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>Sitio, <span class="at">names_to =</span> <span class="st">"familia"</span>, <span class="at">values_to =</span> <span class="st">"abundancia"</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra a las primeras filas del dataframe filtrado para verificar el resultado.</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(inv2_long) <span class="sc">%&gt;%</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Sitio </th>
   <th style="text-align:left;"> familia </th>
   <th style="text-align:right;"> abundancia </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Baetidae </td>
   <td style="text-align:right;"> 45 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Belidae </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Blephariceridae </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Calopterygidae </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Ceratopogonidae </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:left;"> Chironomidae </td>
   <td style="text-align:right;"> 3 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<hr>
</section>
<section id="unión-de-datos-2" class="level4">
<h4 class="anchored" data-anchor-id="unión-de-datos-2">1.6 Unión de datos</h4>
<p>Se une la información biótica (inv2) con la fisicoquímica (fq) a través de la variable común Sitio, para tener una base integrada.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unir bases de datos: `left_join()` combina `inv2` (datos bióticos) con `fq` (datos fisicoquímicos)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># basándose en la columna común `Sitio`. Esto permite analizar la relación entre</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># los macroinvertebrados y las condiciones ambientales.</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `glimpse()` muestra un resumen de la estructura del dataframe resultante.</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>inv2 <span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(fq, <span class="at">by =</span> <span class="st">"Sitio"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 7
Columns: 57
$ Sitio           &lt;chr&gt; "Arimaca", "Arimaca", "Arimaca", "Caracoli", "Caracoli…
$ Baetidae        &lt;dbl&gt; 45, 45, 45, 18, 18, 18, 95
$ Belidae         &lt;dbl&gt; 0, 0, 0, 2, 2, 2, 2
$ Blephariceridae &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1
$ Calopterygidae  &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 1
$ Ceratopogonidae &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 1
$ Chironomidae    &lt;dbl&gt; 3, 3, 3, 16, 16, 16, 19
$ Coenagrionidae  &lt;dbl&gt; 3, 3, 3, 0, 0, 0, 0
$ Corydalidae     &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 10
$ Crambidae       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1
$ Dixidae         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1
$ Dugesiidae      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1
$ Elmidae         &lt;dbl&gt; 23, 23, 23, 40, 40, 40, 65
$ Empididae       &lt;dbl&gt; 0, 0, 0, 1, 1, 1, 0
$ Gomphidae       &lt;dbl&gt; 0, 0, 0, 3, 3, 3, 7
$ Hydrobiidae     &lt;dbl&gt; 4, 4, 4, 0, 0, 0, 1
$ Hydropsychidae  &lt;dbl&gt; 3, 3, 3, 15, 15, 15, 15
$ Leptoceridae    &lt;dbl&gt; 4, 4, 4, 12, 12, 12, 41
$ Leptohyphidae   &lt;dbl&gt; 5, 5, 5, 10, 10, 10, 6
$ Leptophlebiidae &lt;dbl&gt; 17, 17, 17, 35, 35, 35, 49
$ Libellulidae    &lt;dbl&gt; 0, 0, 0, 8, 8, 8, 29
$ Limnesiidae     &lt;dbl&gt; 2, 2, 2, 0, 0, 0, 0
$ Lumbriculidae   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 5
$ Naucoridae      &lt;dbl&gt; 1, 1, 1, 9, 9, 9, 21
$ Oligoneuriidae  &lt;dbl&gt; 0, 0, 0, 1, 1, 1, 5
$ Perlidae        &lt;dbl&gt; 6, 6, 6, 11, 11, 11, 69
$ Psephenidae     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1
$ Psychodidae     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1
$ Ptilodactylidae &lt;dbl&gt; 1, 1, 1, 2, 2, 2, 9
$ Simuliidae      &lt;dbl&gt; 18, 18, 18, 13, 13, 13, 17
$ Tipulidae       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 3
$ Veliidae        &lt;dbl&gt; 2, 2, 2, 1, 1, 1, 34
$ Replica         &lt;dbl&gt; 1, 2, 3, 1, 2, 3, NA
$ Temperatura     &lt;dbl&gt; 22.3, 21.8, 21.9, 23.2, 23.1, 23.0, NA
$ Conductividad   &lt;dbl&gt; 77.2, 78.4, 82.1, 97.4, 93.9, 79.8, NA
$ Oxigeno         &lt;dbl&gt; 5.21, 5.33, 5.31, 4.83, 4.82, 5.14, NA
$ Luz             &lt;dbl&gt; 2160, 2500, 2220, 4600, 2400, 4100, NA
$ Amonio          &lt;dbl&gt; 1e-04, 1e-04, 1e-04, 1e-02, 5e-02, 3e-02, NA
$ Nitrito         &lt;dbl&gt; 0.0105, 0.0152, 0.0152, 0.0355, 0.0368, 0.0355, NA
$ Nitrato         &lt;dbl&gt; 0.1427, 0.1421, 0.1429, 0.2061, 0.2055, 0.2059, NA
$ Fosfato         &lt;dbl&gt; 0.0883, 0.0927, 0.1689, 0.4780, 0.5765, 0.5855, NA
$ Roca            &lt;dbl&gt; 35.71429, 0.00000, 60.00000, 55.55556, 0.00000, 38.461…
$ Grava           &lt;dbl&gt; 28.57143, 46.66667, 10.00000, 44.44444, 62.50000, 46.1…
$ Hoj             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, NA
$ Sed             &lt;dbl&gt; 7.142857, 6.666667, 0.000000, 0.000000, 0.000000, 0.00…
$ Arena           &lt;dbl&gt; 7.142857, 46.666667, 30.000000, 0.000000, 37.500000, 1…
$ Raíces          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, NA
$ Longitud        &lt;dbl&gt; 30, 60, 90, 30, 60, 90, NA
$ Prof.Media      &lt;dbl&gt; 0.2350000, 0.2378667, 0.2228000, 0.3222222, 0.2711250,…
$ Ancho           &lt;dbl&gt; 6.60, 6.80, 9.30, 3.83, 5.74, 5.74, NA
$ Vel.prom        &lt;dbl&gt; 0.04, 0.08, 0.02, 0.60, 0.20, 0.30, NA
$ Area            &lt;dbl&gt; 1.551000, 1.617493, 2.072040, 1.234111, 1.556257, 1.93…
$ Caudal          &lt;dbl&gt; 0.0620400, 0.1293995, 0.0414408, 0.7404667, 0.3112515,…
$ Perim           &lt;dbl&gt; 7.070000, 7.275733, 9.745600, 4.474444, 6.282250, 6.41…
$ Radio           &lt;dbl&gt; 0.2193777, 0.2223134, 0.2126129, 0.2758133, 0.2477229,…
$ Prof.Hidra      &lt;dbl&gt; 0.2350000, 0.2378667, 0.2228000, 0.3222222, 0.2711250,…
$ No.Froude       &lt;dbl&gt; 0.02635803, 0.05239745, 0.01353503, 0.33764511, 0.1226…</code></pre>
</div>
</div>
<hr>
</section>
<section id="conversión-de-variables-categóricas-2" class="level4">
<h4 class="anchored" data-anchor-id="conversión-de-variables-categóricas-2">1.6 Conversión de variables categóricas</h4>
<p>Se convierte Sitio en un factor ordenado, útil para análisis gráficos o modelos que respeten un orden lógico (río arriba → río abajo, por ejemplo).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir `Sitio` a un factor ordenado:</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `mutate(Sitio = factor(Sitio, levels = c(...)))` convierte la columna `Sitio` en un factor.</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `levels` especifica el orden deseado de las categorías, lo cual es importante para visualizaciones</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># y análisis donde el orden tiene un significado (ej. gradiente espacial).</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>fq <span class="ot">&lt;-</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  fq <span class="sc">%&gt;%</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sitio =</span> <span class="fu">factor</span>(Sitio, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Pozo Azul"</span>, <span class="st">"Arimaca"</span>, <span class="st">"Caracoli"</span>)))</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura de Sitio como factor</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fq[,<span class="dv">1</span>]) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [9 × 1] (S3: tbl_df/tbl/data.frame)
 $ Sitio: Factor w/ 3 levels "Pozo Azul","Arimaca",..: 2 2 2 3 3 3 NA NA NA</code></pre>
</div>
</div>
<hr>
</section>
<section id="abreviar-nombres-de-grupos-biológicos-2" class="level4">
<h4 class="anchored" data-anchor-id="abreviar-nombres-de-grupos-biológicos-2">1.8 Abreviar nombres de grupos biológicos</h4>
<p>Se acortan los nombres de las columnas taxonómicas para facilitar la visualización y análisis, especialmente útil para gráficos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener los nombres de las columnas taxonómicas (todas excepto la primera, que es `Sitio`).</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>nombres <span class="ot">&lt;-</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(inv2)[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear abreviaciones para los nombres de las familias:</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># `str_replace_all(nombres, "idae", "")` elimina la terminación "idae" de los nombres.</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># `str_sub(1, 4)` toma los primeros 4 caracteres de cada nombre.</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># `make.unique()` asegura que todas las abreviaciones sean únicas.</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>abreviaciones <span class="ot">&lt;-</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(nombres, <span class="st">"idae"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="dv">1</span>, <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">make.unique</span>()</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar las abreviaciones como nuevos nombres de columna al dataframe `inv2`.</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(inv2)[<span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  abreviaciones</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra a las primeras filas del dataframe filtrado para verificar el resultado.</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(abreviaciones) <span class="sc">%&gt;%</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> x </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Baet </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bel </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Blep </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Calo </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Cera </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Chir </td>
  </tr>
</tbody>
</table>

</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra el dataframe para verificar el resultado.</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>inv2 <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Sitio </th>
   <th style="text-align:right;"> Baet </th>
   <th style="text-align:right;"> Bel </th>
   <th style="text-align:right;"> Blep </th>
   <th style="text-align:right;"> Calo </th>
   <th style="text-align:right;"> Cera </th>
   <th style="text-align:right;"> Chir </th>
   <th style="text-align:right;"> Coen </th>
   <th style="text-align:right;"> Cory </th>
   <th style="text-align:right;"> Cram </th>
   <th style="text-align:right;"> Dix </th>
   <th style="text-align:right;"> Duge </th>
   <th style="text-align:right;"> Elm </th>
   <th style="text-align:right;"> Empi </th>
   <th style="text-align:right;"> Gomp </th>
   <th style="text-align:right;"> Hydr </th>
   <th style="text-align:right;"> Hydr.1 </th>
   <th style="text-align:right;"> Lept </th>
   <th style="text-align:right;"> Lept.1 </th>
   <th style="text-align:right;"> Lept.2 </th>
   <th style="text-align:right;"> Libe </th>
   <th style="text-align:right;"> Limn </th>
   <th style="text-align:right;"> Lumb </th>
   <th style="text-align:right;"> Nauc </th>
   <th style="text-align:right;"> Olig </th>
   <th style="text-align:right;"> Perl </th>
   <th style="text-align:right;"> Psep </th>
   <th style="text-align:right;"> Psyc </th>
   <th style="text-align:right;"> Ptil </th>
   <th style="text-align:right;"> Simu </th>
   <th style="text-align:right;"> Tipu </th>
   <th style="text-align:right;"> Veli </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Arimaca </td>
   <td style="text-align:right;"> 45 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 23 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Caracoli </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 16 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 40 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 35 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Pozo Azul </td>
   <td style="text-align:right;"> 95 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 19 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 65 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 41 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 49 </td>
   <td style="text-align:right;"> 29 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 21 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 69 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 34 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<hr>
</section>
<section id="seleccionar-los-5-taxones-más-abundantes-2" class="level4">
<h4 class="anchored" data-anchor-id="seleccionar-los-5-taxones-más-abundantes-2">1.9 Seleccionar los 5 taxones más abundantes</h4>
<p>En el análisis de comunidades ecológicas, a menudo es crucial identificar las especies o grupos taxonómicos que dominan en términos de abundancia. La capacidad de <strong>seleccionar los taxones más abundantes</strong> nos permite enfocar nuestro análisis en los componentes clave del ecosistema, aquellos que probablemente tienen un mayor impacto en la estructura y función de la comunidad. Utilizando funciones como <code>group_by</code>, <code>summarise</code> y <code>slice_max</code> de <code>tidyverse</code>, podemos cuantificar la abundancia total de cada taxón y luego filtrar para identificar los más prevalentes. Esto es similar a un biólogo que, después de un muestreo exhaustivo, se concentra en las cinco especies de peces más comunes en un río para entender mejor la dinámica de la población. Al destacar los taxones dominantes, podemos obtener una comprensión más clara de la composición de la comunidad y de los factores que influyen en su distribución.</p>
<p>Se identifican los cinco taxones (familias) más abundantes en la base inv2.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar los 5 taxones más abundantes:</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. `ungroup()`: Elimina cualquier agrupación previa del dataframe.</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. `group_by(familia)`: Agrupa los datos por la columna `familia`.</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. `summarise(total = sum(abundancia, na.rm = TRUE))`: Calcula la abundancia total para cada familia.</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. `slice_max(order_by = total, n = 5)`: Selecciona las 5 familias con la mayor abundancia total.</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>inv2_long1 <span class="ot">&lt;-</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>inv2_long <span class="sc">%&gt;%</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(familia) <span class="sc">%&gt;%</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(abundancia, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> total, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra el dataframe para verificar el resultado.</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>inv2_long1 <span class="sc">%&gt;%</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> familia </th>
   <th style="text-align:right;"> total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Baetidae </td>
   <td style="text-align:right;"> 158 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Elmidae </td>
   <td style="text-align:right;"> 128 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Leptophlebiidae </td>
   <td style="text-align:right;"> 101 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Perlidae </td>
   <td style="text-align:right;"> 86 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Leptoceridae </td>
   <td style="text-align:right;"> 57 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<hr>
</section>
<section id="visualización-1" class="level4">
<h4 class="anchored" data-anchor-id="visualización-1">1.10 Visualización</h4>
<p>La <strong>visualización de datos</strong> es el arte de transformar números en imágenes que cuentan una historia. En ecología, un gráfico bien diseñado puede revelar patrones, tendencias y anomalías que serían invisibles en una tabla de datos. Es como el momento en que un ecólogo observa un mapa de distribución de especies y comprende de inmediato la influencia de un factor ambiental. <code>ggplot2</code>, una librería fundamental en R, nos permite construir gráficos complejos capa por capa, desde los puntos de datos hasta las etiquetas y los títulos. Al visualizar la abundancia de taxones, por ejemplo, podemos identificar rápidamente qué grupos dominan y cómo se distribuyen. Esta sección se enfoca en cómo crear gráficos de barras efectivos para comunicar nuestros hallazgos de manera clara y concisa, haciendo que la ciencia de datos sea accesible y comprensible para una audiencia más amplia.</p>
<p>Se genera un gráfico de barras con la abundancia media de cada taxón en inv2.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar un gráfico de barras de la abundancia media por familia:</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. `group_by(familia)`: Agrupa los datos por la columna `familia`.</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. `summarise(media = mean(abundancia, na.rm = TRUE))`: Calcula la abundancia media para cada familia.</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. `ggplot(aes(x = reorder(familia, -media), y = media))`: Inicia la creación del gráfico con `ggplot2`.</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co">#    `reorder(familia, -media)` ordena las familias en el eje X de mayor a menor abundancia media.</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. `geom_col(fill = "#1f78b4")`: Añade las barras al gráfico, con un color específico.</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. `labs()`: Define los títulos de los ejes y el título principal del gráfico.</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. `theme_bw()`: Aplica un tema en blanco y negro al gráfico.</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. `theme(axis.text.x = element_text(angle = 45, hjust = 1))`: Rota las etiquetas del eje X para mejor legibilidad.</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>inv2_long <span class="sc">%&gt;%</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(familia) <span class="sc">%&gt;%</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(abundancia, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(familia, <span class="sc">-</span>media), <span class="at">y =</span> media)) <span class="sc">+</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"#1f78b4"</span>) <span class="sc">+</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Familias de Macroinvertebrados"</span>, <span class="at">y =</span> <span class="st">"Promedio de abundancia"</span>, <span class="at">title =</span> <span class="st">"Familias más abundantes"</span>) <span class="sc">+</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Capitulo1.datos_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="categorizar-una-variable-continua" class="level4">
<h4 class="anchored" data-anchor-id="categorizar-una-variable-continua">1.11 Categorizar una variable continua</h4>
<p>En la ecología, muchas variables ambientales, como la temperatura, la salinidad o el oxígeno disuelto, son continuas. Sin embargo, para ciertos análisis o para la toma de decisiones de gestión, a menudo es útil <strong>categorizar una variable continua</strong> en rangos discretos (por ejemplo, “bajo”, “medio”, “alto”). Esto es similar a clasificar la calidad del agua en diferentes niveles de riesgo para la vida acuática. La función <code>case_when()</code> de <code>tidyverse</code> es una herramienta flexible y poderosa para realizar esta categorización, permitiéndonos definir reglas claras para asignar cada observación a una categoría específica. Al transformar una variable continua en categórica, simplificamos la interpretación de los datos y facilitamos la comunicación de resultados a audiencias no técnicas, lo que es crucial para la aplicación de la ciencia ecológica en la conservación y la gestión ambiental.</p>
<p>Se categoriza el nivel de oxígeno disuelto como bajo, medio o alto, usando puntos de corte arbitrarios como ejemplo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Categorizar el nivel de oxígeno disuelto:</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `mutate(cat_oxigeno = case_when(...))` crea una nueva columna categórica `cat_oxigeno`</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># basándose en los valores de la columna `Oxigeno`.</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `case_when()` permite definir múltiples condiciones para la categorización.</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co"># `count(cat_oxigeno)` muestra el número de observaciones en cada nueva categoría.</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>fq1 <span class="ot">&lt;-</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>fq <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Cat_oxigeno =</span> <span class="fu">case_when</span>(</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    Oxigeno <span class="sc">&lt;</span>  <span class="dv">5</span>    <span class="sc">~</span> <span class="st">"Bajo"</span>,</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    Oxigeno <span class="sc">&lt;=</span> <span class="fl">6.5</span>  <span class="sc">~</span> <span class="st">"Medio"</span>,</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>            <span class="sc">~</span> <span class="st">"Alto"</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Cat_oxigeno)</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Se muestra el dataframe para verificar el resultado.</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>fq1 <span class="sc">%&gt;%</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Cat_oxigeno </th>
   <th style="text-align:right;"> n </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Bajo </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Medio </td>
   <td style="text-align:right;"> 7 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<hr>
</section>
</section>
<section id="cuestionario-2" class="level2">
<h2 class="anchored" data-anchor-id="cuestionario-2">Cuestionario</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Instrucciones</strong>: Responde cada pregunta usando el código y los resultados obtenidos en los ejercicios anteriores.</p>
</div>
</div>
<section id="qué-estación-presentó-mayor-abundancia-total-de-órdenes" class="level4">
<h4 class="anchored" data-anchor-id="qué-estación-presentó-mayor-abundancia-total-de-órdenes">1. ¿Qué estación presentó mayor abundancia total de órdenes?</h4>
<p>Se agrupa por <code>Sitio</code> y se calcula la suma total de invertebrados colectados en cada estación (<code>Taxones1</code>).</p>
</section>
<section id="qué-familia-presentó-mayor-abundancia-en-taxones2" class="level4">
<h4 class="anchored" data-anchor-id="qué-familia-presentó-mayor-abundancia-en-taxones2">2. ¿Qué familia presentó mayor abundancia en <code>Taxones2</code>?</h4>
<p>Se transforma la base a formato largo y se suma la abundancia total por familia.</p>
</section>
<section id="qué-patrón-se-observa-en-el-gráfico-de-órdenes-más-abundantes" class="level4">
<h4 class="anchored" data-anchor-id="qué-patrón-se-observa-en-el-gráfico-de-órdenes-más-abundantes">3. ¿Qué patrón se observa en el gráfico de órdenes más abundantes?</h4>
<p>Ya se abordó en el ejercicio 1.10. Se espera que los estudiantes interpreten visualmente los resultados.</p>
</section>
<section id="cuál-fue-el-valor-de-oxígeno-disuelto-más-alto-en-qué-estación" class="level4">
<h4 class="anchored" data-anchor-id="cuál-fue-el-valor-de-oxígeno-disuelto-más-alto-en-qué-estación">4. ¿Cuál fue el valor de oxígeno disuelto más alto? ¿en qué estación?</h4>
<p>Se busca el valor máximo en la columna <code>Oxigeno</code> de la base <code>fquímicos</code>.</p>
</section>
<section id="qué-estación-tuvo-menor-concentración-de-oxígeno-disuelto" class="level4">
<h4 class="anchored" data-anchor-id="qué-estación-tuvo-menor-concentración-de-oxígeno-disuelto">5. ¿Qué estación tuvo menor concentración de oxígeno disuelto?</h4>
<p>Se busca el menor valor en la columna <code>Oxigeno</code>.</p>
</section>
<section id="cómo-cambiarían-los-resultados-si-se-analiza-solo-arimaca-y-caracoli" class="level4">
<h4 class="anchored" data-anchor-id="cómo-cambiarían-los-resultados-si-se-analiza-solo-arimaca-y-caracoli">6. ¿Cómo cambiarían los resultados si se analiza solo Arimaca y Caracoli?</h4>
<p>Se filtran las estaciones Arimaca y Caracoli y se analiza su abundancia total.</p>
</section>
<section id="qué-sitio-presentó-mayor-conductividad" class="level4">
<h4 class="anchored" data-anchor-id="qué-sitio-presentó-mayor-conductividad">7 ¿Qué sitio presentó mayor conductividad?</h4>
<p>Se identifica la estación con mayor valor de conductividad eléctrica.</p>
<hr>
</section>
</section>
<section id="conclusión" class="level2">
<h2 class="anchored" data-anchor-id="conclusión">Conclusión</h2>
<p>La manipulación de datos ecológicos no es solo una tarea técnica, sino una forma de dar voz a la naturaleza. En este capítulo recorrimos herramientas fundamentales del <code>tidyverse</code> que permiten transformar registros dispersos en estructuras ordenadas, resúmenes significativos y visualizaciones comprensibles.</p>
<p>Los datos de plancton y de macroinvertebrados nos ofrecieron un escenario para ejercitar habilidades que serán útiles a lo largo de este manual. Aprendimos a filtrar lo esencial, crear nuevas variables que reflejan dinámicas biológicas, y relacionar lo biótico con lo abiótico mediante la unión de bases de datos. Todo ello con un enfoque reproducible, transparente y adaptable.</p>
<p>Este primer paso nos invita a seguir explorando con la certeza de que cada fila de una base de datos puede ser el reflejo de un proceso ecológico más profundo. El análisis de datos es, entonces, una herramienta para cuidar, entender y transformar nuestro entorno.</p>
<p>En el siguiente capítulo, profundizaremos en las posibilidades de la exploración gráfica multivariada, donde patrones, relaciones y contrastes empiezan a revelarse ante nuestros ojos.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>